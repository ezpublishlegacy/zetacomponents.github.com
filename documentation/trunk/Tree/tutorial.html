<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en"
	lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="description" content="Zeta Components - reusable set of high quality PHP components to fasten your development." />
	<meta name="keywords" content="PHP, apache, components, framework, quality" />
	<meta name="author" content="jerome" />
	<meta name="language" content="en" />
	<meta name="date" content="Sun, 10 Jul 2011 11:10:40 +0200" />
	<meta name="robots" content="all" />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.title" content="Tutorial" />
	<meta name="DC.creator" content="jerome" />
	<meta name="DC.date" content="Sun, 10 Jul 2011 11:10:40 +0200" />
	<meta name="DC.rights" content="Copyright" />

	<link rel="meta" href="/documentation/trunk/Tree/tutorial.rdf" />
	<link rel="icon" href="/images/favicon.png" type="image/png" />

	<link rel="Stylesheet" type="text/css" href="/styles/screen.css" media="screen" />
	<link rel="Stylesheet" type="text/css" href="/styles/print.css" media="print" />


	<title>Zeta Components - high quality PHP components</title>
</head>
<body>
<div id="wcv">
	<h1>
		<a id="header-png" href="" title="Zeta Components - high quality PHP components">
			Zeta Components - high quality PHP components
		</a>
	</h1>

	<ul class="navigation">
<li >
	<a href="/news.html" title="About">About</a>
	</li>
<li >
	<a href="/community/index.html" title="Community">Community</a>
	</li>
<li class="requested">
	<a href="/documentation/overview.html" title="Documentation">Documentation</a>
	</li>
<li >
	<a href="/download/index.html" title="Download">Download</a>
	</li>
<li >
	<a href="/support.html" title="Support">Support</a>
	</li>

</ul>
<ul class="subnavigation">
<li >
	<a href="/documentation/overview.html" title="Overview">Overview</a>
	</li>
<li >
	<a href="/documentation/install.html" title="Installation">Installation</a>
	</li>

</ul>

	<div class="content">
    <ul class="tabs">
    <li class="requested">
	<a href="/documentation/trunk/Tree/tutorial.html" title="Tutorial">Tutorial</a>
	</li>
<li >
	<a href="/documentation/trunk/Tree/phpdoc/classtrees.html" title="API">API</a>
	</li>

</ul>

		<h2>eZ Components - Tree</h2><div class="toc"><h3>Table of Contents</h3><ul><li><p><a href="#introduction">Introduction</a></p></li><li><p><a href="#dependencies">Dependencies</a></p></li><li><p><a href="#class-overview">Class overview</a></p></li><li><p><a href="#basic-usage">Basic usage</a></p><ul><li><p><a href="#operations-on-trees">Operations on trees</a></p></li><li><p><a href="#iterating-over-a-node-list">Iterating over a node list</a></p></li><li><p><a href="#creating-and-modifying-a-tree">Creating and modifying a tree</a></p><ul><li><p><a href="#auto-generated-ids">Auto-generated IDs</a></p></li></ul></li></ul></li><li><p><a href="#back-ends">Back-ends</a></p><ul><li><p><a href="#non-database-back-ends">Non-database back-ends</a></p></li><li><p><a href="#database-based-back-ends">Database-based back-ends</a></p><ul><li><p><a href="#data-stores">Data stores</a></p><ul><li><p><a href="#database-table">Database table</a></p></li><li><p><a href="#persistent-object">Persistent Object</a></p></li></ul></li></ul></li></ul></li><li><p><a href="#visualization">Visualization</a></p><ul><li><p><a href="#text-based-visualization">Text-based visualization</a></p></li><li><p><a href="#xhtml-based-visualization">XHTML-based visualization</a></p></li><li><p><a href="#graphviz-based-visualization">GraphViz-based visualization</a></p></li><li><p><a href="#yui-based-visualization">YUI based visualization</a></p></li></ul></li></ul></div><a name="introduction"></a><a name="id12"></a><h3>Introduction</h3><p>The Tree component enables you to create, manipulate and query tree structures. The component provides many operations on trees, as well as on the nodes in the trees. Because there are different algorithms for storing tree structures in a relational database—each with different properties—the component supports multiple back-ends. The Tree component itself comes with a memory (<a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeMemory.html'>ezcTreeMemory</a>) and XML (<a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a>) back-end. The TreeDatabaseTiein component provides three back-ends that store the tree structure in a database table.</p><p>Aside from storing the hierarchical data itself, the component also enables you to associate data with the tree nodes. The data is stored through a data store. Depending on the back-ends, different data stores are available, as shown in the following table:</p><table><thead><tr><th><p class="cell">Back-end</p></th><th><p class="cell">Data Stores</p></th></tr></thead><tbody><tr><td><p class="cell">ezcTreeMemory</p></td><td><p class="cell">ezcTreeMemoryDataStore</p></td></tr><tr><td><p class="cell">ezcTreeXml</p></td><td><p class="cell">ezcTreeXmlInternalDataStore</p></td></tr><tr><td><p class="cell">ezcTreeDbMaterializedPath <a class="footnote" href="#id10" name="_footnote_id10">
            [1]
        </a></p></td><td><p class="cell">ezcTreeDbExternalTableDataStore <a class="footnote" href="#id10" name="_footnote_id10">
            [1]
        </a>, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a> <a class="footnote" href="#id11" name="_footnote_id11">
            [2]
        </a></p></td></tr><tr><td><p class="cell">ezcTreeDbNestedSet <a class="footnote" href="#id10" name="_footnote_id10">
            [1]
        </a></p></td><td><p class="cell">ezcTreeDbExternalTableDataStore <a class="footnote" href="#id10" name="_footnote_id10">
            [1]
        </a>, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a> <a class="footnote" href="#id11" name="_footnote_id11">
            [2]
        </a></p></td></tr><tr><td><p class="cell">ezcTreeDbParentChild <a class="footnote" href="#id10" name="_footnote_id10">
            [1]
        </a></p></td><td><p class="cell">ezcTreeDbExternalTableDataStore <a class="footnote" href="#id10" name="_footnote_id10">
            [1]
        </a>, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a> <a class="footnote" href="#id11" name="_footnote_id11">
            [2]
        </a></p></td></tr></tbody></table><dl class="footnote"><dt><a href="#_footnote_id10" name="id10">1</a></dt><dd>Available through the <a href="../TreeDatabaseTiein/tutorial.html#introduction">TreeDatabaseTiein</a> component</dd></dl><dl class="footnote"><dt><a href="#_footnote_id11" name="id11">2</a></dt><dd>Available through the <a href="../TreePersistentObjectTiein/tutorial.html#introduction">TreePersistentObjectTiein</a> component</dd></dl><a name="dependencies"></a><a name="id13"></a><h3>Dependencies</h3><p>From the table and comments above, it becomes apparent that there are a few optional dependencies. Through the <a href="../TreeDatabaseTiein/tutorial.html#introduction">TreeDatabaseTiein</a> and <a href="../TreePersistentObjectTiein/tutorial.html#introduction">TreePersistentObjectTiein</a> components, additional functionality becomes available.</p><a name="class-overview"></a><a name="id14"></a><h3>Class overview</h3><dl><dt>ezcTreeMemory, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></dt><dd>These two classes are available (without using the Tiein components) to store tree data in memory or in an XML file. There is a matching data store for each of those two classes (<a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeMemoryDataStore.html'>ezcTreeMemoryDataStore</a> and <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a>).</dd><dt>ezcTreeDbMaterializedPath, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbNestedSet.html'>ezcTreeDbNestedSet</a>, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbParentChild.html'>ezcTreeDbParentChild</a></dt><dd>These three back-ends are made available through the <a href="../TreeDatabaseTiein/tutorial.html#introduction">TreeDatabaseTiein</a> component. Each of them implements a different strategy for storing the relations between nodes. The nature of your application will determine the appropriate back-end. For more information, see the <a href="#back-ends">Back-ends</a> section.</dd><dt>ezcTreeNode</dt><dd>This class represents one node of the tree. Objects of this class can be added to the tree. The object stores both the ID and data belonging to the node. Data is always fetched on demand, unless <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeListIterator.html'>ezcTreeNodeListIterator</a> is used with the pre-fetch option.</dd><dt>ezcTreeNodeListIterator</dt><dd>This class can be used to iterate over an <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeList.html'>ezcTreeNodeList</a>, which is returned by many of the node fetching operations (see the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html'>ezcTree</a> documentation for which operations are supported). It is advised to use this class to iterate through the nodes and not to simply use foreach() on a returned <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeList.html'>ezcTreeNodeList</a>. This is because this class also supports pre-fetching associated data, which can drastically reduce the number of queries being run in case a database-based data store is used (such as <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbExternalTableDataStore.html'>ezcTreeDbExternalTableDataStore</a> or <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a>).</dd></dl><a name="basic-usage"></a><a name="id15"></a><h3>Basic usage</h3><p>To use a tree, you will need both a tree back-end (a class inherited from <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html'>ezcTree</a>), and a data store (implementation of the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDataStore.html'>ezcTreeDataStore</a> interface). The following example shows how to instantiate a new tree object using the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a> back-end and the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a> data store:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$f&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchNodeById</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'F'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">echo&nbsp;</span><span style="color: #000000">$f</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">data</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">"&lt;br/&gt;\n"</span><span style="color: #0000FF">;&nbsp;</span><span style="color: #007700">//&nbsp;echos&nbsp;Fluorine</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>Lines 4 and 5 define the data store and the tree. The parameters to <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html'>ezcTree</a>'s constructor specify which file and data store to use. After opening the tree, lines 7 and 8 demonstrate how to fetch a node from the tree by using the node ID, and then access the data that belongs to the node. IDs can be either integer numbers or strings. There are a few restrictions when using strings as IDs; they must:</p><ol><li><p>be a valid PHP array key</p></li><li><p>consist of XML <a href="http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-NameChar">NameChar</a> characters only</p></li></ol><p>Memory trees can never be instantiated, because there is no permanent storage available. They will always have to be created from scratch or created from another tree by using the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html#copy'>ezcTree::copy</a>() method.</p><a name="operations-on-trees"></a><a name="id16"></a><h4>Operations on trees</h4><p>It is possible to run many operations on trees and nodes, other than fetching the nodes. The following example demonstrates two different types of operations on the tree or on nodes.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #0000FF">if&nbsp;(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchNodeById</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'F'&nbsp;</span><span style="color: #0000FF">)</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #000000">isDescendantOf</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchNodeById</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'NonMetals'&nbsp;</span><span style="color: #0000FF">)&nbsp;)&nbsp;)</span></li>
<li><span style="color: #0000FF">{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #335533">"Flourine&nbsp;is&nbsp;a&nbsp;non-metal.&lt;br/&gt;\n"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">}</span></li>
<li></li>
<li><span style="color: #0000FF">if&nbsp;(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">isDescendantOf</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'O'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'NonMetals'&nbsp;</span><span style="color: #0000FF">)&nbsp;)</span></li>
<li><span style="color: #0000FF">{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #335533">"Oxygen&nbsp;is&nbsp;a&nbsp;non-metal.&lt;br/&gt;\n"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">}</span></li>
<li></li>
<li><span style="color: #000000">$nonMetals&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchSubtree</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'NonMetals'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">echo&nbsp;</span><span style="color: #335533">"We&nbsp;found&nbsp;</span><span style="color: #0000FF">{</span><span style="color: #000000">$nonMetals</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">size</span><span style="color: #0000FF">}</span><span style="color: #335533">&nbsp;non-metals:&nbsp;\n"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">foreach&nbsp;(&nbsp;</span><span style="color: #000000">$nonMetals</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">nodes&nbsp;</span><span style="color: #0000FF">as&nbsp;</span><span style="color: #000000">$node&nbsp;</span><span style="color: #0000FF">)</span></li>
<li><span style="color: #0000FF">{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #335533">"-&nbsp;</span><span style="color: #0000FF">{</span><span style="color: #000000">$node</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">id</span><span style="color: #0000FF">}</span><span style="color: #335533">:&nbsp;</span><span style="color: #0000FF">{</span><span style="color: #000000">$node</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">data</span><span style="color: #0000FF">}</span><span style="color: #335533">&nbsp;\n"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">}</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>Lines 7 to 11 show how to tell whether a node is a descendant of another node.  Most of the operations can also be done directly on the tree by using the node IDs. This is shown in lines 13 to 16. All operations are implemented on the tree level, so using the syntax in lines 13 to 16 will result in slightly higher performance. Lines 18 to 23 demonstrate another tree operation: fetching a sub-tree. All operations that can return more than one node do so as an <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeList.html'>ezcTreeNodeList</a>.</p><p>Refer to the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNode.html'>ezcTreeNode</a> documentation for a full list of supported operations.</p><a name="iterating-over-a-node-list"></a><a name="id17"></a><h4>Iterating over a node list</h4><p>When you iterate over a node list manually, such as in the previous examples, the associated data is fetched on demand - at the moment the -&gt;data property of a node is requested. If you have a large node list to be returned, this can create many database queries if you are using a database-based back-end and data store. In such cases, you might want to fetch all data in one go - with one query. The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeListIterator.html'>ezcTreeNodeListIterator</a> class enables you to do this:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$noble&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchChildren</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'NobleGasses'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">echo&nbsp;</span><span style="color: #335533">"We&nbsp;found&nbsp;</span><span style="color: #0000FF">{</span><span style="color: #000000">$noble</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">size</span><span style="color: #0000FF">}</span><span style="color: #335533">&nbsp;noble&nbsp;gasses:&nbsp;\n"</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #0000FF">foreach&nbsp;(&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeListIterator.html'>ezcTreeNodeListIterator</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$noble</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">true&nbsp;</span><span style="color: #0000FF">)&nbsp;as&nbsp;</span><span style="color: #000000">$nodeId&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;</span><span style="color: #000000">$nodeData&nbsp;</span><span style="color: #0000FF">)</span></li>
<li><span style="color: #0000FF">{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #335533">"-&nbsp;</span><span style="color: #0000FF">{</span><span style="color: #000000">$nodeId</span><span style="color: #0000FF">}</span><span style="color: #335533">:&nbsp;</span><span style="color: #0000FF">{</span><span style="color: #000000">$nodeData</span><span style="color: #0000FF">}</span><span style="color: #335533">&nbsp;\n"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">}</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>In line 7 we use the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html#fetchChildren'>ezcTree-&gt;fetchChildren</a>() method to find all the direct children of the node with the ID "NobleGasses". Then in lines 10 to 13 we create a <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeListIterator.html'>ezcTreeNodeListIterator</a> over the returned <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeNodeList.html'>ezcTreeNodeList</a> $noble. The first parameter is the tree, the second one is the node list, and the third parameter specifies whether the data should be prefetched.</p><a name="creating-and-modifying-a-tree"></a><a name="id18"></a><h4>Creating and modifying a tree</h4><p>If you want to create a new tree, instead of instantiating a tree you use the overloaded <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html#create'>ezcTree::create</a>() factory method. Once a tree and associated store are created you can proceed to fill the tree with nodes. The example below demonstrates this (and creates the XML file that is used in the other examples in this tutorial):</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html#create'>ezcTreeXml::create</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$rootNode&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Elements'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Elements'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">setRootNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$rootNode&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$nonMetal&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'NonMetals'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Non-Metals'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$rootNode</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$nonMetal&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$nobleGasses&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'NobleGasses'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Noble&nbsp;Gasses'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$rootNode</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$nobleGasses&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'H'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Hydrogen'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'C'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Carbon'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'N'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Nitrogen'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'O'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Oxygen'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'P'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Phosphorus'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'S'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Sulfur'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Se'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Selenium'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li></li>
<li><span style="color: #000000">$nobleGasses</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'F'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Fluorine'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nobleGasses</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Cl'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Chlorine'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nobleGasses</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Br'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Bromine'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nobleGasses</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'I'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Iodine'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>In line 5 we create a new tree by using the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html#create'>ezcTreeXml::create</a>() factory method. The name of the file is the first argument and the data store is the second argument. This will create a completely empty tree without nodes or even a root node. In lines 7 and 8 we then create a new node with the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html#createNode'>ezcTree-&gt;createNode</a>() method, which accepts the node ID and node data value as arguments. The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbExternalTableDataStore.html'>ezcTreeDbExternalTableDataStore</a> data store also supports compound data values, as is listed in the documentation for <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbExternalTableDataStore.html#__construct'>ezcTreeDbExternalTableDataStore-&gt;__construct</a>().  Lines 10 to 13 proceed to add two new nodes to the $rootNode and lines 15-26 add further nodes to the $nonMetal and $nobleGasses nodes.</p><a name="auto-generated-ids"></a><a name="id19"></a><h5>Auto-generated IDs</h5><p>The Tree component also supports auto-generated IDs for tree nodes. In order to let the component generate IDs for you, you need to set the Tree property "autoId" to "true". In the example below we create another tree structure, but let the Tree component generate the IDs automatically:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html#create'>ezcTreeXml::create</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/royals.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">autoId&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">true</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$rootNode&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Beatrix'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">setRootNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$rootNode&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$willem&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Willem-Alexander'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$rootNode</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$willem&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$friso&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Friso'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$rootNode</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$friso&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #0000FF">echo&nbsp;</span><span style="color: #000000">$friso</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">id</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">"\n"</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$willem</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Catharina'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$willem</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Alexia'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$willem</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Ariane'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li></li>
<li><span style="color: #000000">$friso</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Luana'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$friso</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">null</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Zaria'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>The main change compared to the previous example is the setting of autoId to true in line 6. When autoId is set, the ID argument to <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html#createNode'>ezcTree::createNode</a>() can be null. In that case an ID is automatically generated.</p><p>This property <em>must</em> be set immediately after instantiating the tree, unless an already existing tree is opened through the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a> class. For database backends, there are a few extra requirements for the schema. The "id" field should be defined as an auto-increment integer field, or an integer field linked with a sequence.</p><a name="back-ends"></a><a name="id20"></a><h3>Back-ends</h3><a name="non-database-back-ends"></a><a name="id21"></a><h4>Non-database back-ends</h4><p>The Tree component comes with two generic back-ends - one that stores the tree structure in an XML file, and another one that only keeps a tree structure in memory. The XML back-end uses PHP's DOM functionality to parse the tree and thus the entire tree structure is loaded into memory when an <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a> object is instantiated.</p><p>The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeMemory.html'>ezcTreeMemory</a> back-end has to be created from scratch when it used. However, it is also possible to copy an <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a>-based tree to a memory-based one. The example below demonstrates this:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$memTree&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeMemory.html#create'>ezcTreeMemory::create</a></span><span style="color: #0000FF">(&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeMemoryDataStore.html'>ezcTreeMemoryDataStore</a></span><span style="color: #0000FF">()&nbsp;);</span></li>
<li><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTree.html#copy'>ezcTree::copy</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$memTree&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #0000FF">echo&nbsp;</span><span style="color: #000000">$memTree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">getChildCountRecursive</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Elements'&nbsp;</span><span style="color: #0000FF">),&nbsp;</span><span style="color: #335533">"\n"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>Operations on trees based on <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeMemory.html'>ezcTreeMemory</a> are of course faster than operations on trees based on <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDb.html'>ezcTreeDb</a> or <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a>.</p><a name="database-based-back-ends"></a><a name="id22"></a><h4>Database-based back-ends</h4><p>By installing the <a href="../TreeDatabaseTiein/tutorial.html#introduction">TreeDatabaseTiein</a> and <a href="../TreePersistentObjectTiein/tutorial.html#introduction">TreePersistentObjectTiein</a> components, a few more back-ends and data stores are available. There are three additional back-ends:</p><ol><li><p>ezcTreeDbParentChild - Uses the ID of the parent to keep track of the structure only.</p></li><li><p>ezcTreeDbNestedSet - Uses left/right values in addition to the parent ID that the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbParentChild.html'>ezcTreeDbParentChild</a> back-end uses to keep track of the tree structure.</p></li><li><p>ezcTreeDbMaterializedPath - Uses /1/2/4/6/19/24 style paths to store the tree structure.</p></li></ol><p>Each of those three back-ends have different performance-related properties depending on which operation is run. The following table summarizes some of the properties of each algorithm:</p><table><thead><tr><th><p class="cell">Operation</p></th><th colspan="3"><p class="cell">Back-ends</p></th></tr><tr><th><p class="cell">Parent Child</p></th><th><p class="cell">Nested set</p></th><th><p class="cell">Materialized Path</p></th></tr></thead><tbody><tr><td><p class="cell">addChild()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell">Possibly long, as on average the left and right values of half of the nodes in the tree have to be updated.</p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">delete()</p></td><td><p class="cell">Recursive operation to find a whole tree.</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em> but query has to use LIKE.</p></td></tr><tr><td><p class="cell">fetchChildren()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">fetchNodeById()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">fetchParent()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">fetchPath()</p></td><td><p class="cell">Recursive operation to iterate over the parents all the way to the root node.</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">fetchSubtreeBreadthFirst()</p></td><td><p class="cell">Recursive operation to find the whole subtree - order of nodes for each level is not guaranteed.</p></td><td><p class="cell">Recursive operation to find the whole subtree - order of nodes for each level is not guaranteed.</p></td><td><p class="cell">Recursive operation to find the whole subtree - order of nodes for each level is not guaranteed.</p></td></tr><tr><td><p class="cell">fetchSubtreeDepthFirst()</p></td><td><p class="cell">Recursive operation to find the whole subtree - order of nodes is not guaranteed.</p></td><td><p class="cell">Simple operation - order of nodes is the same order as when they were added.</p></td><td><p class="cell"><em>Simple operation.</em> but query has to use LIKE - order of nodes is not guaranteed.</p></td></tr><tr><td><p class="cell">getChildCount()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">getChildCountRecursive()</p></td><td><p class="cell">Recursive operation to find the nodes in the whole subtree.</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em> but query has to use LIKE.</p></td></tr><tr><td><p class="cell">getPathLength()</p></td><td><p class="cell">Recursive operation to iterate over the parents all the way to the root node.</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">hasChildNodes()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">isChildOf()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">isDescendantOf()</p></td><td><p class="cell">Recursive operation to iterate over the parents until either the root node or when the node is found.</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">isSiblingOf()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">move()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell">Possibly long, as on average the left and the right values of half of the nodes need to be updated - twice.</p></td><td><p class="cell">All the nodes in the subtree that is moved need to be updated - this is done with string operations.</p></td></tr><tr><td><p class="cell">nodeExists()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr><tr><td><p class="cell">setRootNode()</p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td><td><p class="cell"><em>Simple operation.</em></p></td></tr></tbody></table><a name="data-stores"></a><a name="id23"></a><h5>Data stores</h5><p>The database back-ends that the <a href="../TreeDatabaseTiein/tutorial.html#introduction">TreeDatabaseTiein</a> component provides also support two different data stores. One of them, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbExternalTableDataStore.html'>ezcTreeDbExternalTableDataStore</a>, comes with the <a href="../TreeDatabaseTiein/tutorial.html#introduction">TreeDatabaseTiein</a> component. Another one, <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a>, is provided through the <a href="../TreePersistentObjectTiein/tutorial.html#introduction">TreePersistentObjectTiein</a> component.</p><a name="database-table"></a><a name="id24"></a><h6>Database table</h6><p>ezcTreeDbExternalTableDataStore can be used in two different modes. In the first you specify a database field that is matched against the node's ID, and another field that is used for the "data" property belonging to a node. The next example illustrates this:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$dbh&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcDbFactory.html#create'>ezcDbFactory::create</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'sqlite://:memory:'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$dbh</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">exec</span><span style="color: #0000FF">(&nbsp;&lt;&lt;&lt;ENDSQL</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;TABLE&nbsp;nested_set&nbsp;(</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'id'&nbsp;varchar(255)&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'parent_id'&nbsp;varchar(255),</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'lft'&nbsp;integer&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'rgt'&nbsp;integer&nbsp;NOT&nbsp;NULL</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;UNIQUE&nbsp;INDEX&nbsp;'nested_set_pri'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'id'&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;INDEX&nbsp;'nested_set_left'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'lft'&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;INDEX&nbsp;'nested_set_right'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'rgt'&nbsp;);</span></li>
<li></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;TABLE&nbsp;data&nbsp;(</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'node_id'&nbsp;varchar(255)&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'data_field'&nbsp;varchar(255)&nbsp;NOT&nbsp;NULL</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;UNIQUE&nbsp;INDEX&nbsp;'data_pri'&nbsp;on&nbsp;'data'&nbsp;(&nbsp;'node_id'&nbsp;);</span></li>
<li><span style="color: #0000FF">ENDSQL</span></li>
<li><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbExternalTableDataStore.html'>ezcTreeDbExternalTableDataStore</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$dbh</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'data'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'node_id'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'data_field'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbNestedSet.html'>ezcTreeDbNestedSet</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$dbh</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'nested_set'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">setRootNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$rootNode&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Elements'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Elements'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$rootNode</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$nonMetal&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'NonMetals'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Non-Metals'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$rootNode</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$nobleGasses&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'NobleGasses'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'Noble&nbsp;Gasses'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$nonMetal</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'H'</span><span style="color: #0000FF">,&nbsp;&nbsp;</span><span style="color: #335533">'Hydrogen'&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li></li>
<li><span style="color: #0000FF">echo&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchNodeById</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'H'&nbsp;</span><span style="color: #0000FF">)-&gt;</span><span style="color: #000000">data</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">"\n"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>In this example, lines 4 to 22 set up the database and database tables. Refer to the specific database back-end's documentation for full information on what the different tables should look like. In this case, for the data store we only create two fields: node_id and data_field. We can see this back in line 24, where we instantiate the store object. We specify the database object, the name of the data table ('data'), the field that is matched against the node ID ('node_id') and which field to use for data ('data_field'). In lines 27 to 30 we then insert some sample nodes and line 32 demonstrates the retrieval of data.</p><p>In the second mode, we do not specify a field to fetch data from:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Setup&nbsp;the&nbsp;database&nbsp;tables</span></li>
<li><span style="color: #000000">$dbh&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcDbFactory.html#create'>ezcDbFactory::create</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'sqlite://:memory:'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$dbh</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">exec</span><span style="color: #0000FF">(&nbsp;&lt;&lt;&lt;ENDSQL</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;TABLE&nbsp;nested_set&nbsp;(</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'id'&nbsp;varchar(255)&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'parent_id'&nbsp;varchar(255),</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'lft'&nbsp;integer&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'rgt'&nbsp;integer&nbsp;NOT&nbsp;NULL</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;UNIQUE&nbsp;INDEX&nbsp;'nested_set_pri'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'id'&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;INDEX&nbsp;'nested_set_left'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'lft'&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;INDEX&nbsp;'nested_set_right'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'rgt'&nbsp;);</span></li>
<li></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;TABLE&nbsp;data&nbsp;(</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'node_id'&nbsp;varchar(255)&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'melting_temp_k'&nbsp;float,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'boiling_temp_k'&nbsp;float</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;UNIQUE&nbsp;INDEX&nbsp;'data_pri'&nbsp;on&nbsp;'data'&nbsp;(&nbsp;'node_id'&nbsp;);</span></li>
<li><span style="color: #0000FF">ENDSQL</span></li>
<li><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Setup&nbsp;the&nbsp;store&nbsp;and&nbsp;tree</span></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbExternalTableDataStore.html'>ezcTreeDbExternalTableDataStore</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$dbh</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'data'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'node_id'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbNestedSet.html'>ezcTreeDbNestedSet</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$dbh</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'nested_set'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Insert&nbsp;data</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">setRootNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$root&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Metals'</span><span style="color: #0000FF">,&nbsp;array()&nbsp;)&nbsp;);</span></li>
<li><span style="color: #000000">$root</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Fe'</span><span style="color: #0000FF">,&nbsp;&nbsp;array(&nbsp;</span><span style="color: #335533">'melting_temp_K'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;</span><span style="color: #000000">1811</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'boiling_temp_K'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;</span><span style="color: #000000">3134&nbsp;</span><span style="color: #0000FF">)&nbsp;)&nbsp;);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Fetch&nbsp;data</span></li>
<li><span style="color: #000000">var_dump</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchNodeById</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Fe'&nbsp;</span><span style="color: #0000FF">)-&gt;</span><span style="color: #000000">data&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>Differences when compared with the previous example include the data table definition in lines 17 to 21. Instead of defining a specific data field to use, there are now multiple fields ('melting_temp_k' and 'boiling_temp_k'). The instantiation of the data store in line 27 now misses the fourth argument as well. The data that is specified when creating a node now consists of an array describing all the fields in the database table, except for the 'node_id' as that one is implicit. When fetching the data the whole table record is returned, minus the 'node_id' field.</p><a name="persistent-object"></a><a name="id25"></a><h6>Persistent Object</h6><p>The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a> brings multiple data fields even further and extends the Tree to use persistent objects as data for the tree nodes.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Setup&nbsp;the&nbsp;database&nbsp;tables</span></li>
<li><span style="color: #000000">$dbh&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcDbFactory.html#create'>ezcDbFactory::create</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'sqlite://:memory:'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$dbh</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">exec</span><span style="color: #0000FF">(&nbsp;&lt;&lt;&lt;ENDSQL</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;TABLE&nbsp;nested_set&nbsp;(</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'id'&nbsp;varchar(255)&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'parent_id'&nbsp;varchar(255),</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'lft'&nbsp;integer&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'rgt'&nbsp;integer&nbsp;NOT&nbsp;NULL</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;UNIQUE&nbsp;INDEX&nbsp;'nested_set_pri'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'id'&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;INDEX&nbsp;'nested_set_left'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'lft'&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;INDEX&nbsp;'nested_set_right'&nbsp;on&nbsp;'nested_set'&nbsp;(&nbsp;'rgt'&nbsp;);</span></li>
<li></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;TABLE&nbsp;data&nbsp;(</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'node_id'&nbsp;varchar(255)&nbsp;NOT&nbsp;NULL,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'melting_temp_k'&nbsp;float,</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'boiling_temp_k'&nbsp;float</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #335533">&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;UNIQUE&nbsp;INDEX&nbsp;'data_pri'&nbsp;on&nbsp;'data'&nbsp;(&nbsp;'node_id'&nbsp;);</span></li>
<li><span style="color: #0000FF">ENDSQL</span></li>
<li><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Create&nbsp;the&nbsp;example&nbsp;Persistent&nbsp;Object&nbsp;definition&nbsp;files&nbsp;and&nbsp;stub&nbsp;classes</span></li>
<li><span style="color: #000000">$dbSchema&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcDbSchema.html#createFromDb'>ezcDbSchema::createFromDb</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$dbh&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$writer1&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcDbSchemaPersistentWriter.html'>ezcDbSchemaPersistentWriter</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">true&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$writer2&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcDbSchemaPersistentClassWriter.html'>ezcDbSchemaPersistentClassWriter</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">true&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$writer1</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">saveToFile</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/po_defs'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$dbSchema&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$writer2</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">saveToFile</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/classes'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$dbSchema&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">require&nbsp;</span><span style="color: #335533">'files/classes/data.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Setup&nbsp;the&nbsp;store&nbsp;and&nbsp;tree</span></li>
<li><span style="color: #000000">$session&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcPersistentSession.html'>ezcPersistentSession</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$dbh</span><span style="color: #0000FF">,&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcPersistentCodeManager.html'>ezcPersistentCodeManager</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">"files/po_defs"&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$session</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'data'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'node_id'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeDbNestedSet.html'>ezcTreeDbNestedSet</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$dbh</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'nested_set'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Insert&nbsp;data</span></li>
<li><span style="color: #000000">$metal&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000">data</span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">setRootNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$root&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Metals'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$metal&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$iron&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000">data</span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$iron</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">setState</span><span style="color: #0000FF">(&nbsp;array(&nbsp;</span><span style="color: #335533">'melting_temp_k'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;</span><span style="color: #000000">1811</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'boiling_temp_k'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;</span><span style="color: #000000">3134&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li><span style="color: #000000">$root</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addChild</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">createNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Fe'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$iron&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Fetch&nbsp;data</span></li>
<li><span style="color: #000000">$fe&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">fetchNodeById</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Fe'&nbsp;</span><span style="color: #0000FF">)-&gt;</span><span style="color: #000000">data</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">var_dump</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$fe&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>The database tables are set up just like the previous example in lines 5 to 24. Lines 26 to 32 then continue to use the <a href="../DatabaseSchema/tutorial.html#introduction">DatabaseSchema</a> component to write persistent definition files and class stubs. The store is set up in lines 35 and 36. <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreePersistentObjectDataStore.html'>ezcTreePersistentObjectDataStore</a> uses <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcPersistentSession.html'>ezcPersistentSession</a> as the first argument and then the object's class and object's ID property as second and third arguments. Unlike the previous example, you should specify the class and property names of the persistent objects that you are storing - <em>not</em> the table name and ID field. Lines 39 to 48 then show how data is inserted into the tree, and how it is retrieved. You will most likely have to tune the classes that are generated for you in a real life situation, as the generated classes (line 29 and 31) only have private properties and the getState() and setState() methods that persistent objects are required to have. Refer to the <a href="../PersistentObject/tutorial.html#introduction">PersistentObject</a> documentation for more information.</p><a name="visualization"></a><a name="id26"></a><h3>Visualization</h3><p>Sometimes it is useful to visualize a tree structure. The Tree component has some functionality for this in the form of different visualizers. There are currently three possibilities.</p><a name="text-based-visualization"></a><a name="id27"></a><h4>Text-based visualization</h4><p>The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorPlainText.html'>ezcTreeVisitorPlainText</a> class implements a visitor pattern to render a tree for the console. Both latin1 and utf-8 are supported as character sets, and the utf-8 version looks much better. The following example shows how to generated a text-based representation of the tree from the first example in this tutorial:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorPlainText.html'>ezcTreeVisitorPlainText</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorPlainText.html#constSYMBOL_UTF'>ezcTreeVisitorPlainText::SYMBOL_UTF</a>8&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">accept</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">echo&nbsp;(string)&nbsp;</span><span style="color: #000000">$visitor</span><span style="color: #0000FF">;&nbsp;</span><span style="color: #007700">//&nbsp;print&nbsp;the&nbsp;plot</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>The output is:</p><code class="block">Elements
├─NonMetals
│ ├─H
│ ├─C
│ ├─N
│ ├─O
│ ├─P
│ ├─S
│ └─Se
└─NobleGasses
  ├─F
  ├─Cl
  ├─Br
  └─I</code><a name="xhtml-based-visualization"></a><a name="id28"></a><h4>XHTML-based visualization</h4><p>The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorXHTML.html'>ezcTreeVisitorXHTML</a> class implements another visitor that renders the trees as nested XHTML lists. In the following example we render the same tree again with the default options for this visitor:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorXHTML.html'>ezcTreeVisitorXHTML</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">accept</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">echo&nbsp;(string)&nbsp;</span><span style="color: #000000">$visitor</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>This outputs the following XHTML:</p><code class="block">&lt;ul&gt;
  &lt;li&gt;&lt;a href="/idNonMetals"&gt;Non-Metals&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="/idNonMetals/idH"&gt;Hydrogen&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNonMetals/idC"&gt;Carbon&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNonMetals/idN"&gt;Nitrogen&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNonMetals/idO"&gt;Oxygen&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNonMetals/idP"&gt;Phosphorus&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNonMetals/idS"&gt;Sulfur&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNonMetals/idSe"&gt;Selenium&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href="/idNobleGasses"&gt;Noble Gasses&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="/idNobleGasses/idF"&gt;Fluorine&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNobleGasses/idCl"&gt;Chlorine&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNobleGasses/idBr"&gt;Bromine&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="/idNobleGasses/idI"&gt;Iodine&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</code><p>The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorXHTML.html'>ezcTreeVisitorXHTML</a> visitor allows some options that can be set through the constructor. Options include whether links should be added (addLinks), whether the root node should be shown (displayRootNode) and others. The options are documented with the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorXHTMLOptions.html'>ezcTreeVisitorXHTMLOptions</a> class.</p><a name="graphviz-based-visualization"></a><a name="id29"></a><h4>GraphViz-based visualization</h4><p>In case you are not on the console, it is also possible to render the tree as a GraphViz .dot file that can then be used to generate an image, such as a PNG image. The next example shows the use of the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorGraphViz.html'>ezcTreeVisitorGraphViz</a> class:</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000">ezcTreeVisitorGraphViz</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">accept</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">file_put_contents</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/graphviz.dot'</span><span style="color: #0000FF">,&nbsp;(string)&nbsp;</span><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>The generated .dot file can be converted to an image by running the following command:</p><code class="block">dot -Tpng -o img/graphviz.png files/graphviz.dot</code><p>The result of this is as follows (scaled):</p><div class="&#10;&#9;&#9;&#9;&#9;&#9;image &#10;&#9;&#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;center&#10;&#9;&#9;&#9;&#9;&#9;&#9; "><img alt="" title="" src="img/graphviz.png"/><span class="image_title"/></div><a name="yui-based-visualization"></a><a name="id30"></a><h4>YUI based visualization</h4><p>Aside from console and graphical output, there is also a visualizer that renders the tree in a <a href="http://developer.yahoo.com/yui/menu/">YUI</a> compatible XHTML output. This can be used to automatically populate a <a href="http://developer.yahoo.com/yui/menu/">YUI</a> style menu. The code is pretty much the same, except for the addition of the xmlId argument to the constructor of <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorYUI.html'>ezcTreeVisitorYUI</a>.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorYUI.html'>ezcTreeVisitorYUI</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'menu'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">accept</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">echo&nbsp;(string)&nbsp;</span><span style="color: #000000">$visitor</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>However, in order to actually render the menu, you need to have some specific JavaScript in the head element of your HTML code. First of all, you need to include the YUI code:</p><code class="block">&lt;script type="text/javascript" src="http://yui.yahooapis.com/2.3.1/build/yahoo-dom-event/yahoo-dom-event.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://yui.yahooapis.com/2.3.1/build/container/container_core-min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://yui.yahooapis.com/2.3.1/build/menu/menu-min.js"&gt;&lt;/script&gt;</code><p>Then, you need the following code to turn the generated menu into a YUI menu (the {literal} opening and closing tag is required if you use the <a href="../Template/tutorial.html#introduction">Template</a> component):</p><code class="block">&lt;script type="text/javascript"&gt;
{literal}
YAHOO.util.Event.onContentReady('overview', function () {
    var oMenu = new YAHOO.widget.MenuBar("menu", { autosubmenudisplay: true, showdelay: 200 });

    oMenu.render();
});
{/literal}
&lt;/script&gt;</code><p>The full (but minimal) code looks then like:</p><ol class="code">
<li>&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN"&nbsp;"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</li>
<li>&lt;html&nbsp;xmlns="http://www.w3.org/1999/xhtml"&nbsp;xml:lang="en"&nbsp;lang="en"&gt;</li>
<li>&lt;head&gt;</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&lt;link&nbsp;rel="stylesheet"&nbsp;type="text/css"&nbsp;href="http://yui.yahooapis.com/2.3.1/build/menu/assets/skins/sam/menu.css"/&gt;</li>
<li></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type="text/javascript"&nbsp;src="http://yui.yahooapis.com/2.3.1/build/yahoo-dom-event/yahoo-dom-event.js"&gt;&lt;/script&gt;</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type="text/javascript"&nbsp;src="http://yui.yahooapis.com/2.3.1/build/container/container_core-min.js"&gt;&lt;/script&gt;</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type="text/javascript"&nbsp;src="http://yui.yahooapis.com/2.3.1/build/menu/menu-min.js"&gt;&lt;/script&gt;</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type="text/javascript"&gt;</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;YAHOO.util.Event.onContentReady('menu',&nbsp;function&nbsp;()&nbsp;{</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;oMenu&nbsp;=&nbsp;new&nbsp;YAHOO.widget.MenuBar("menu",&nbsp;{&nbsp;autosubmenudisplay:&nbsp;true,&nbsp;showdelay:&nbsp;200&nbsp;});</li>
<li></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oMenu.render();</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;});</li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;</li>
<li>&lt;/head&gt;</li>
<li>&lt;body&nbsp;&nbsp;class="yui-skin-sam"&gt;</li>
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">require_once&nbsp;</span><span style="color: #335533">'tutorial_autoload.php'</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXmlInternalDataStore.html'>ezcTreeXmlInternalDataStore</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$tree&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeXml.html'>ezcTreeXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'files/example1.xml'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$store&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorYUI.html'>ezcTreeVisitorYUI</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'menu'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$tree</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">accept</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">echo&nbsp;(string)&nbsp;</span><span style="color: #000000">$visitor</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">?&gt;</span></li>
<li>&lt;/body&gt;</li>
<li>&lt;/html&gt;</li>
</ol><p>The result of this is as follows (scaled):</p><div class="&#10;&#9;&#9;&#9;&#9;&#9;image &#10;&#9;&#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;center&#10;&#9;&#9;&#9;&#9;&#9;&#9; "><img alt="" title="" src="img/yui1.gif"/><span class="image_title"/></div><p>The <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorYUI.html'>ezcTreeVisitorYUI</a> visitor allows some options that can be set through the constructor. The options are documented with the <a href='/zetacomponents/documentation/trunk/Tree/phpdoc/ezcTreeVisitorYUIOptions.html'>ezcTreeVisitorYUIOptions</a> class.</p><!--Local Variables:
mode: rst
fill-column: 79
End:
vim: et syn=rst tw=79 spell-->

	</div>

	<div class="footer">
	Copyright © 2010 <a href="http://apache.org">The Software Foundation</a>
</div>
</div>
</body>
</html>
