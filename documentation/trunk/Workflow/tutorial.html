<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en"
	lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="description" content="Zeta Components - reusable set of high quality PHP components to fasten your development." />
	<meta name="keywords" content="PHP, apache, components, framework, quality" />
	<meta name="author" content="dotxp" />
	<meta name="language" content="en" />
	<meta name="date" content="Wed, 04 Aug 2010 13:07:09 +0200" />
	<meta name="robots" content="all" />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.title" content="Tutorial" />
	<meta name="DC.creator" content="dotxp" />
	<meta name="DC.date" content="Wed, 04 Aug 2010 13:07:09 +0200" />
	<meta name="DC.rights" content="Copyright" />

	<link rel="meta" href="/documentation/trunk/Workflow/tutorial.rdf" />
	<link rel="icon" href="/images/favicon.png" type="image/png" />

	<link rel="Stylesheet" type="text/css" href="/styles/screen.css" media="screen" />
	<link rel="Stylesheet" type="text/css" href="/styles/print.css" media="print" />


	<title>Zeta Components - high quality PHP components</title>
</head>
<body>
<div id="wcv">
	<h1>
		<a id="header-png" href="" title="Zeta Components - high quality PHP components">
			Zeta Components - high quality PHP components
		</a>
	</h1>

	<ul class="navigation">
<li >
	<a href="/news.html" title="About">About</a>
	</li>
<li >
	<a href="/community/index.html" title="Community">Community</a>
	</li>
<li class="requested">
	<a href="/documentation/overview.html" title="Documentation">Documentation</a>
	</li>
<li >
	<a href="/download/index.html" title="Download">Download</a>
	</li>
<li >
	<a href="/support.html" title="Support">Support</a>
	</li>

</ul>
<ul class="subnavigation">
<li >
	<a href="/documentation/overview.html" title="Overview">Overview</a>
	</li>
<li >
	<a href="/documentation/install.html" title="Installation">Installation</a>
	</li>

</ul>

	<div class="content">
    <ul class="tabs">
    <li class="requested">
	<a href="/documentation/trunk/Workflow/tutorial.html" title="Tutorial">Tutorial</a>
	</li>
<li >
	<a href="/documentation/trunk/Workflow/phpdoc/classtrees.html" title="API">API</a>
	</li>
<li >
	<a href="/documentation/trunk/Workflow/theoretical_background.html" title="Theoretical_background ">Theoretical_background </a>
	</li>

</ul>

		<h2>eZ Components - Workflow</h2><div class="toc"><h3>Table of Contents</h3><ul><li><p><a href="#introduction">Introduction</a></p></li><li><p><a href="#class-overview">Class Overview</a></p><ul><li><p><a href="#workflow-execution">Workflow Execution</a></p></li><li><p><a href="#workflow-definition">Workflow Definition</a></p></li><li><p><a href="#graph-node-classes">Graph Node Classes</a></p></li><li><p><a href="#condition-classes">Condition Classes</a></p></li></ul></li><li><p><a href="#workflow-definition-usage">Workflow Definition Usage</a></p><ul><li><p><a href="#creating-a-simple-workflow-programmatically">Creating a simple workflow programmatically</a></p></li><li><p><a href="#adding-custom-php-code-to-your-workflow-and-manipulating-workflow-variables">Adding custom PHP code to your workflow and manipulating workflow variables</a></p></li><li><p><a href="#saving-a-workflow-to-an-xml-file">Saving a workflow to an XML file</a></p></li><li><p><a href="#loading-a-workflow-from-an-xml-file">Loading a workflow from an XML file</a></p></li><li><p><a href="#visualizing-a-workflow-using-graphviz">Visualizing a workflow using GraphViz</a></p></li></ul></li><li><p><a href="#workflow-execution-usage">Workflow Execution Usage</a></p><ul><li><p><a href="#execution-plugins">Execution Plugins</a></p></li><li><p><a href="#execution-listeners">Execution Listeners</a></p></li></ul></li></ul></div><a name="introduction"></a><a name="id2"></a><h3>Introduction</h3><p>Business enterprises need to reduce the cost of doing business and continually develop new services and products. Enterprise Content Management helps with storing business-critical content (customer data, documents, etc.) in a central repository and in a unified way. Workflow Management provides the methodologies and software that help with organizing the processes that operate on this content inside an organization.</p><p>The relationship between Enterprise Content Management and Workflow Management is analogous to that of attributes (data) and methods (operations on the data) that are encapsulated in a class in object-oriented programming.</p><p>The Workflow component provides a virtual machine that executes workflows represented through object graphs. These object graphs can be created programmatically through the software component's Workflow Definition API. Alternatively, a workflow definition can be loaded from an XML file. Object graph and XML file are two different representations of a workflow definition that uses a backend language built on the workflow patterns.</p><p>More information on the theoretical background is available <a href="Workflow_theoretical_background.html">here</a>.</p><a name="class-overview"></a><a name="id3"></a><h3>Class Overview</h3><p>This section gives you an overview of the main classes of the Workflow component.</p><p>ezcWorkflow</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflow.html'>ezcWorkflow</a> class represents a workflow.</p></blockquote><a name="workflow-execution"></a><a name="id4"></a><h4>Workflow Execution</h4><p>ezcWorkflowExecutionNonInteractive</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowExecutionNonInteractive.html'>ezcWorkflowExecutionNonInteractive</a> class can execute non-interactive workflows, in other words workflows that contains no input nodes and no sub-workflows.</p></blockquote><p>ezcWorkflowDatabaseExecution</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowDatabaseExecution.html'>ezcWorkflowDatabaseExecution</a> class can execute interactive workflows. The persistence data is stored using a relational database.</p></blockquote><a name="workflow-definition"></a><a name="id5"></a><h4>Workflow Definition</h4><p>ezcWorkflowDefinitionStorageXml</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowDefinitionStorageXml.html'>ezcWorkflowDefinitionStorageXml</a> class provides the functionality to save workflow definitions to and load workflow definitions from XML files.</p></blockquote><p>ezcWorkflowDatabaseDefinitionStorage</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowDatabaseDefinition.html'>ezcWorkflowDatabaseDefinition</a> Storageclass provides the functionality to save workflow definitions to and load workflow definitions from a relational database.</p></blockquote><a name="graph-node-classes"></a><a name="id6"></a><h4>Graph Node Classes</h4><p>Objects of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNode.html'>ezcWorkflowNode</a> classes represent the nodes of a workflow.</p><p>ezcWorkflowNode</p><blockquote><p>ezcWorkflowNode is the abstract base class for all graph node classes.</p></blockquote><p>ezcWorkflowNodeStart</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeStart.html'>ezcWorkflowNodeStart</a> class represents the one and only start node of a workflow. The execution of the workflow starts here.</p><p>Creating an object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflow.html'>ezcWorkflow</a> class automatically creates the start node for this new workflow. It can be accessed through the startNode property.</p></blockquote><p>ezcWorkflowNodeEnd</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeEnd.html'>ezcWorkflowNodeEnd</a> class represents an end node of a workflow. A workflow must have at least one end node. The execution of the workflow ends when an end node is reached.</p><p>Creating an object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflow.html'>ezcWorkflow</a> class automatically creates a default end node for this new workflow. It can be accessed through the endNode property.</p></blockquote><p>ezcWorkflowNodeCancel</p><blockquote><p>As soon as a node of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeCancel.html'>ezcWorkflowNodeCancel</a> type is activated, the complete workflow instance is removed. This includes currently executing nodes, those which may execute at some future time, and all parent and sub-workflows. The workflow instance is recorded as having completed unsuccessfully.</p></blockquote><p>ezcWorkflowNodeFinally</p><blockquote><p>Start node of a sequence of final activities that is executed when a workflow execution is cancelled.</p><p>Creating an object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflow.html'>ezcWorkflow</a> class automatically creates the finally node for this new workflow. It can be accessed through the finallyNode property.</p></blockquote><p>ezcWorkflowNodeAction</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeAction.html'>ezcWorkflowNodeAction</a> class represents an activity node. When the node is reached, the business logic that is implemented by the associated service object is executed.</p></blockquote><p>ezcWorkflowNodeSubWorkflow</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeSubWorkflow.html'>ezcWorkflowNodeSubWorkflow</a> class represents a sub-workflow. When the node is reached, the specified sub-workflow is started. The workflow is suspended until the sub-workflow has finished executing.</p></blockquote><p>ezcWorkflowNodeInput</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeInput.html'>ezcWorkflowNodeInput</a> class represents an input node. When the node is reached, the workflow engine will suspend the workflow execution if the specified input data is not available (first activation). While the workflow is suspended, the application that embeds the workflow engine may supply the input data and resume the workflow execution (second activation of the input node). Input data is stored in a workflow variable.</p></blockquote><p>ezcWorkflowNodeVariableSet</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableSet.html'>ezcWorkflowNodeVariableSet</a> class sets a specified workflow variable to a given value.</p></blockquote><p>ezcWorkflowNodeVariableUnset</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableUnset.html'>ezcWorkflowNodeVariableUnset</a> class unsets a specified workflow variable.</p></blockquote><p>ezcWorkflowNodeVariableAdd</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableAdd.html'>ezcWorkflowNodeVariableAdd</a> class adds a given operand, either a constant or the value of another workflow variable, to a specified workflow variable.</p></blockquote><p>ezcWorkflowNodeVariableSub</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableSub.html'>ezcWorkflowNodeVariableSub</a> class subtracts a given operand, either a constant or the value of another workflow variable, from a specified workflow variable.</p></blockquote><p>ezcWorkflowNodeVariableMul</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableMul.html'>ezcWorkflowNodeVariableMul</a> class multiplies a specified workflow variable with a given operand, either a constant or the value of another workflow variable.</p></blockquote><p>ezcWorkflowNodeVariableDiv</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableDiv.html'>ezcWorkflowNodeVariableDiv</a> class divides a specified workflow variable by a given operand, either a constant or the value of another workflow variable.</p></blockquote><p>ezcWorkflowNodeVariableIncrement</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableIncrement.html'>ezcWorkflowNodeVariableIncrement</a> class increments the value of a specified workflow variable.</p></blockquote><p>ezcWorkflowNodeVariableDecrement</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeVariableDecrement.html'>ezcWorkflowNodeVariableDecrement</a> class decrements the value of a specified workflow variable.</p></blockquote><p>ezcWorkflowNodeParallelSplit</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeParallelSplit.html'>ezcWorkflowNodeParallelSplit</a> class implements the Parallel Split workflow pattern.</p><p>The Parallel Split workflow pattern divides one thread of execution unconditionally into multiple parallel threads of execution.</p><p>Use Case Example: After the credit card specified by the customer has been successfully charged, the activities of sending a confirmation email and starting the shipping process can be executed in parallel.</p></blockquote><p>ezcWorkflowNodeSynchronization</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeSynchronization.html'>ezcWorkflowNodeSynchronization</a> class implements the Synchronization workflow pattern.</p><p>The Synchronization workflow pattern synchronizes multiple parallel threads of execution into a single thread of execution. Workflow execution continues once all threads of execution that are to be synchronized have finished executing (exactly once).</p><p>Use Case Example: After the confirmation email has been sent and the shipping process has been completed, the order can be archived.</p></blockquote><p>ezcWorkflowNodeExclusiveChoice</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeExclusiveChoice.html'>ezcWorkflowNodeExclusiveChoice</a> class implements the Exclusive Choice workflow pattern.</p><p>The Exclusive Choice workflow pattern defines multiple possible paths for the workflow of which exactly one is chosen.</p><p>Use Case Example: After an order has been received, the payment can be performed by credit card or bank transfer.</p></blockquote><p>ezcWorkflowNodeSimpleMerge</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeSimpleMerge.html'>ezcWorkflowNodeSimpleMerge</a> class implements the Simple Merge workflow pattern.</p><p>The Simple Merge workflow pattern is to be used to merge the possible paths that are defined by a preceding Exclusive Choice. It is assumed that of these possible paths exactly one is taken and no synchronization takes place.</p><p>Use Case Example: After the payment has been performed by either credit card or bank transfer, the order can be processed further.</p></blockquote><p>ezcWorkflowNodeLoop</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeLoop.html'>ezcWorkflowNodeLoop</a> class is a specialization of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeExclusiveChoice.html'>ezcWorkflowNodeExclusiveChoice</a> class and may be used to conveniently express loops.</p></blockquote><p>ezcWorkflowNodeMultiChoice</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeMultiChoice.html'>ezcWorkflowNodeMultiChoice</a> class implements the Multi Choice workflow pattern.</p><p>The Multi-Choice workflow pattern defines multiple possible paths for the workflow of which one or more are chosen. It is a generalization of the Parallel Split and Exclusive Choice workflow patterns.</p></blockquote><p>ezcWorkflowNodeSynchronizingMerge</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeSynchronizingMerge.html'>ezcWorkflowNodeSynchronizingMerge</a> class implements the Synchronizing Merge workflow pattern.</p><p>The Synchronizing Merge workflow pattern is to be used to synchronize multiple parallel threads of execution that are activated by a preceding Multi-Choice.</p></blockquote><p>ezcWorkflowNodeDiscriminator</p><blockquote><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeDiscriminator.html'>ezcWorkflowNodeDiscriminator</a> class implements the Discriminator workflow pattern.</p><p>The Discriminator workflow pattern can be applied when the assumption we made for the Simple Merge workflow pattern does not hold. It can deal with merge situations where multiple incoming branches may run in parallel. It activates its outgoing node after being activated by the first incoming branch and then waits for all remaining branches to complete before it resets itself. After the reset the Discriminator can be triggered again.</p><p>Use Case Example: To improve response time, an action is delegated to several distributed servers. The first response proceeds the flow, the other responses are ignored.</p></blockquote><a name="condition-classes"></a><a name="id7"></a><h4>Condition Classes</h4><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowCondition.html'>ezcWorkflowCondition</a> classes can be used to express branch conditions and input validation.</p><p>ezcWorkflowConditionVariable</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionVariable.html'>ezcWorkflowConditionVariable</a> loads a workflow variable and evaluates another <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowCondition.html'>ezcWorkflowCondition</a> object for it.</p></blockquote><p>ezcWorkflowConditionNot</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionNot.html'>ezcWorkflowConditionNot</a> decorates an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowCondition.html'>ezcWorkflowCondition</a> object and negates its expression.</p></blockquote><p>ezcWorkflowConditionAnd</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionAnd.html'>ezcWorkflowConditionAnd</a> class represents a boolean AND expression. It can hold an arbitrary number of <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowCondition.html'>ezcWorkflowCondition</a> objects.</p></blockquote><p>ezcWorkflowConditionOr</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionOr.html'>ezcWorkflowConditionOr</a> class represents a boolean OR expression. It can hold an arbitrary number of <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowCondition.html'>ezcWorkflowCondition</a> objects.</p></blockquote><p>ezcWorkflowConditionXor</p><blockquote><p>An object of the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionXor.html'>ezcWorkflowConditionXor</a> class represents a boolean XOR expression. It can hold an arbitrary number of <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowCondition.html'>ezcWorkflowCondition</a> objects.</p></blockquote><p>ezcWorkflowConditionIsTrue</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsTrue.html'>ezcWorkflowConditionIsTrue</a> object evaluates to true when the associated workflow variable has the value true.</p></blockquote><p>ezcWorkflowConditionIsFalse</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsFalse.html'>ezcWorkflowConditionIsFalse</a> object evaluates to true when the associated workflow variable has the value false.</p></blockquote><p>ezcWorkflowConditionIsEqual</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsEqual.html'>ezcWorkflowConditionIsEqual</a> object evaluates to true when the associated workflow variable is equal to the comparison value.</p></blockquote><p>ezcWorkflowConditionIsNotEqual</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsNotEqual.html'>ezcWorkflowConditionIsNotEqual</a> object evaluates to true when the associated workflow variable is not equal to the comparison value.</p></blockquote><p>ezcWorkflowConditionIsGreaterThan</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsGreaterThan.html'>ezcWorkflowConditionIsGreaterThan</a> object evaluates to true when the associated workflow variable is greater than the comparison value.</p></blockquote><p>ezcWorkflowConditionIsEqualOrGreaterThan</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsEqualOrGreaterThan.html'>ezcWorkflowConditionIsEqualOrGreaterThan</a> object evaluates to true when the associated workflow variable is equal to or greater than the comparison value.</p></blockquote><p>ezcWorkflowConditionIsLessThan</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsLessThan.html'>ezcWorkflowConditionIsLessThan</a> object evaluates to true when the associated workflow variable is less than the comparison value.</p></blockquote><p>ezcWorkflowConditionIsEqualOrLessThan</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsEqualOrLessThan.html'>ezcWorkflowConditionIsEqualOrLessThan</a> object evaluates to true when the associated workflow variable is equal to or less than the comparison value.</p></blockquote><p>ezcWorkflowConditionInArray</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionInArray.html'>ezcWorkflowConditionInArray</a> object evaluates to true when the associated workflow variable is in the specified array.</p></blockquote><p>ezcWorkflowConditionIsAnything</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsAnything.html'>ezcWorkflowConditionIsAnything</a> object always evaluates to true.</p></blockquote><p>ezcWorkflowConditionIsArray</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsArray.html'>ezcWorkflowConditionIsArray</a> object evaluates to true when the associated workflow variable is an array.</p></blockquote><p>ezcWorkflowConditionIsBool</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsBool.html'>ezcWorkflowConditionIsBool</a> object evaluates to true when the associated workflow variable is a boolean.</p></blockquote><p>ezcWorkflowConditionIsFloat</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsFloat.html'>ezcWorkflowConditionIsFloat</a> object evaluates to true when the associated workflow variable is a float.</p></blockquote><p>ezcWorkflowConditionIsInteger</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsInteger.html'>ezcWorkflowConditionIsInteger</a> object evaluates to true when the associated workflow variable is an integer.</p></blockquote><p>ezcWorkflowConditionIsObject</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsObject.html'>ezcWorkflowConditionIsObject</a> object evaluates to true when the associated workflow variable is an object.</p></blockquote><p>ezcWorkflowConditionIsString</p><blockquote><p>The condition represented by an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionIsString.html'>ezcWorkflowConditionIsString</a> object evaluates to true when the associated workflow variable is a string.</p></blockquote><a name="workflow-definition-usage"></a><a name="id8"></a><h3>Workflow Definition Usage</h3><p>This section gives a few basic examples on how to create, save and load workflows. It also demonstrates how to make a graphical representation of your workflow.</p><a name="creating-a-simple-workflow-programmatically"></a><a name="id9"></a><h4>Creating a simple workflow programmatically</h4><p>This example shows how to set up a fairly simple workflow that will execute differently based on the variable 'choice'.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #007700">//&nbsp;Create&nbsp;new&nbsp;workflow&nbsp;of&nbsp;name&nbsp;"Test".</span></li>
<li><span style="color: #000000">$workflow&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflow.html'>ezcWorkflow</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Test'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Create&nbsp;an&nbsp;Input&nbsp;node&nbsp;that&nbsp;expects&nbsp;a&nbsp;boolean&nbsp;workflow&nbsp;variable&nbsp;of&nbsp;name&nbsp;"choice".</span></li>
<li><span style="color: #000000">$input&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeInput.html'>ezcWorkflowNodeInput</a></span><span style="color: #0000FF">(</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;array(&nbsp;</span><span style="color: #335533">'choice'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;new&nbsp;</span><span style="color: #000000">ezcWorkflowConditionIsBool&nbsp;</span><span style="color: #0000FF">)</span></li>
<li><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Add&nbsp;the&nbsp;previously&nbsp;created&nbsp;Input&nbsp;node</span></li>
<li><span style="color: #007700">//&nbsp;as&nbsp;an&nbsp;outgoing&nbsp;node&nbsp;to&nbsp;the&nbsp;start&nbsp;node.</span></li>
<li><span style="color: #000000">$workflow</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">startNode</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addOutNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$input&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Create&nbsp;a&nbsp;new&nbsp;Exclusive&nbsp;Choice&nbsp;node&nbsp;and&nbsp;add&nbsp;it&nbsp;as&nbsp;an</span></li>
<li><span style="color: #007700">//&nbsp;outgoing&nbsp;node&nbsp;to&nbsp;the&nbsp;previously&nbsp;created&nbsp;Input&nbsp;node.</span></li>
<li><span style="color: #007700">//&nbsp;This&nbsp;node&nbsp;will&nbsp;choose&nbsp;which&nbsp;output&nbsp;to&nbsp;run&nbsp;based&nbsp;on&nbsp;the</span></li>
<li><span style="color: #007700">//&nbsp;choice&nbsp;workflow&nbsp;variable.</span></li>
<li><span style="color: #000000">$branch&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000">ezcWorkflowNodeExclusiveChoice</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">$branch</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addInNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$input&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Either&nbsp;$true&nbsp;or&nbsp;$false&nbsp;will&nbsp;be&nbsp;run&nbsp;depending&nbsp;on</span></li>
<li><span style="color: #007700">//&nbsp;the&nbsp;above&nbsp;choice.</span></li>
<li><span style="color: #007700">//&nbsp;Note&nbsp;that&nbsp;neither&nbsp;$true&nbsp;nor&nbsp;$false&nbsp;are&nbsp;valid&nbsp;action&nbsp;nodes.</span></li>
<li><span style="color: #007700">//&nbsp;see&nbsp;the&nbsp;next&nbsp;example</span></li>
<li><span style="color: #000000">$trueNode&nbsp;&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeAction.html'>ezcWorkflowNodeAction</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'PrintTrue'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$falseNode&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeAction.html'>ezcWorkflowNodeAction</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'PrintFalse'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Branch</span></li>
<li><span style="color: #007700">//&nbsp;Condition:&nbsp;Variable&nbsp;"choice"&nbsp;has&nbsp;boolean&nbsp;value&nbsp;"true".</span></li>
<li><span style="color: #007700">//&nbsp;Action:&nbsp;&nbsp;&nbsp;&nbsp;PrintTrue&nbsp;service&nbsp;object.</span></li>
<li><span style="color: #000000">$branch</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addConditionalOutNode</span><span style="color: #0000FF">(</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionVariable.html'>ezcWorkflowConditionVariable</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'choice'</span><span style="color: #0000FF">,&nbsp;new&nbsp;</span><span style="color: #000000">ezcWorkflowConditionIsTrue&nbsp;</span><span style="color: #0000FF">),</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">$trueNode&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Branch</span></li>
<li><span style="color: #007700">//&nbsp;Condition:&nbsp;Variable&nbsp;"choice"&nbsp;has&nbsp;boolean&nbsp;value&nbsp;"false".</span></li>
<li><span style="color: #007700">//&nbsp;Action:&nbsp;&nbsp;&nbsp;&nbsp;PrintFalse&nbsp;service&nbsp;object.</span></li>
<li><span style="color: #000000">$branch</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addConditionalOutNode</span><span style="color: #0000FF">(</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowConditionVariable.html'>ezcWorkflowConditionVariable</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'choice'</span><span style="color: #0000FF">,&nbsp;new&nbsp;</span><span style="color: #000000">ezcWorkflowConditionIsFalse&nbsp;</span><span style="color: #0000FF">),</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;</span><span style="color: #000000">$falseNode</span></li>
<li><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Create&nbsp;SimpleMerge&nbsp;node&nbsp;and&nbsp;add&nbsp;the&nbsp;two&nbsp;possible&nbsp;threads&nbsp;of</span></li>
<li><span style="color: #007700">//&nbsp;execution&nbsp;as&nbsp;incoming&nbsp;nodes&nbsp;of&nbsp;the&nbsp;end&nbsp;node.</span></li>
<li><span style="color: #000000">$merge&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000">ezcWorkflowNodeSimpleMerge</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">$merge</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addInNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$trueNode&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$merge</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addInNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$falseNode&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$merge</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addOutNode</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$workflow</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">endNode&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><a name="adding-custom-php-code-to-your-workflow-and-manipulating-workflow-variables"></a><a name="id10"></a><h4>Adding custom PHP code to your workflow and manipulating workflow variables</h4><p>In the previous example the $trueNode and $falseNodes where action objects. However, in order to make them work we must add service objects. The following example replaces the lines where $trueNode and $falseNode are created.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #0000FF">class&nbsp;</span><span style="color: #000000">MyServiceObject&nbsp;</span><span style="color: #0000FF">implements&nbsp;</span><span style="color: #000000">ezcWorkflowServiceObject</span></li>
<li><span style="color: #0000FF">{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #000000">$message</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #000000">__construct</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$message&nbsp;</span><span style="color: #0000FF">)</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">$this</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">message&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$message</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;}</span></li>
<li></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #000000">execute</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">ezcWorkflowExecution&nbsp;$execution&nbsp;</span><span style="color: #0000FF">)</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #000000">$this</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">message</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">//&nbsp;Manipulate&nbsp;the&nbsp;workflow.</span></li>
<li><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Does&nbsp;not&nbsp;affect&nbsp;the&nbsp;workflow,&nbsp;for&nbsp;illustration&nbsp;only.</span></li>
<li><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">$execution</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">setVariable</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'choice'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">true&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">//&nbsp;Return&nbsp;true&nbsp;to&nbsp;signal&nbsp;that&nbsp;the&nbsp;service&nbsp;object&nbsp;has&nbsp;finished</span></li>
<li><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;executing.</span></li>
<li><span style="color: #007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000FF">return&nbsp;</span><span style="color: #000000">true</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;}</span></li>
<li></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #000000">__toString</span><span style="color: #0000FF">()</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;{</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #335533">"MyServiceObject,&nbsp;message&nbsp;</span><span style="color: #0000FF">{</span><span style="color: #000000">$this</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">message</span><span style="color: #0000FF">}</span><span style="color: #335533">"</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;}</span></li>
<li><span style="color: #0000FF">}</span></li>
<li></li>
<li><span style="color: #000000">$trueNode&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeAction.html'>ezcWorkflowNodeAction</a></span><span style="color: #0000FF">(&nbsp;array(&nbsp;</span><span style="color: #335533">'class'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;</span><span style="color: #335533">'MyServiceObject'</span><span style="color: #0000FF">,</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #335533">'arguments'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;array(&nbsp;</span><span style="color: #335533">'message:&nbsp;TRUE'&nbsp;</span><span style="color: #0000FF">)&nbsp;)</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #000000">$falseNode&nbsp;&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowNodeAction.html'>ezcWorkflowNodeAction</a></span><span style="color: #0000FF">(&nbsp;array(&nbsp;</span><span style="color: #335533">'class'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;</span><span style="color: #335533">'MyServiceObject'</span><span style="color: #0000FF">,</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #335533">'arguments'&nbsp;</span><span style="color: #0000FF">=&gt;&nbsp;array(&nbsp;</span><span style="color: #335533">'message:&nbsp;FALSE'&nbsp;</span><span style="color: #0000FF">)&nbsp;)</span></li>
<li><span style="color: #0000FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>When this action node is executed it will load the service object with the parameters specified and run the execute() method. Our execute method will print the message passed to the constructor and change the workflow variable 'choice'.</p><p>The execute() method of a service object may return false to indicate that it is not finished yet. The workflow execution will then be suspended. The next time the workflow execution is resumed the service object's execute() method will be invoked again.</p><a name="saving-a-workflow-to-an-xml-file"></a><a name="id11"></a><h4>Saving a workflow to an XML file</h4><p>Typically a workflow is built once and executed many times. It is also common that workflows are interupted during execution and resumed later in another PHP request. To accomodate this it is possible to save and load workflows to XML files (or database through the WorkflowDatabaseTiein).</p><p>This example shows you how to store a workflow to an XML file. The example assumes the workflow can be found in the $workflow variable.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #007700">//&nbsp;Set&nbsp;up&nbsp;workflow&nbsp;definition&nbsp;storage&nbsp;(XML).</span></li>
<li><span style="color: #000000">$definition&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowDefinitionStorageXml.html'>ezcWorkflowDefinitionStorageXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'/path/to/directory'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Save&nbsp;workflow&nbsp;definition&nbsp;to&nbsp;database.</span></li>
<li><span style="color: #000000">$definition</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">save</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$workflow&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><a name="loading-a-workflow-from-an-xml-file"></a><a name="id12"></a><h4>Loading a workflow from an XML file</h4><p>It is of course also possible to load a workflow that has been saved to disk.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #007700">//&nbsp;Set&nbsp;up&nbsp;workflow&nbsp;definition&nbsp;storage&nbsp;(XML).</span></li>
<li><span style="color: #000000">$definition&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowDefinitionStorageXml.html'>ezcWorkflowDefinitionStorageXml</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'/path/to/directory'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Load&nbsp;latest&nbsp;version&nbsp;of&nbsp;workflow&nbsp;named&nbsp;"Test".</span></li>
<li><span style="color: #000000">$workflow&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$definition</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">loadByName</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Test'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><a name="visualizing-a-workflow-using-graphviz"></a><a name="id13"></a><h4>Visualizing a workflow using GraphViz</h4><p>It is possible to write visitors that traverse the workflow graph. One example of this is the GraphViz visitor that generates a viewable graph representation of the workflow. The GraphViz visitor uses the __tostring methods on the nodes to get names for the nodes.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #007700">//&nbsp;Generate&nbsp;GraphViz/dot&nbsp;markup&nbsp;for&nbsp;workflow&nbsp;"Test".</span></li>
<li><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000">ezcWorkflowVisitorVisualization</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">$workflow</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">accept</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$visitor&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #0000FF">print&nbsp;</span><span style="color: #000000">$visitor</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><code class="block">digraph Test {
node1 [label="Start"]
node3 [label="Input"]
node4 [label="Exclusive Choice"]
node5 [label="PrintTrue"]
node7 [label="Simple Merge"]
node2 [label="End"]
node6 [label="PrintFalse"]

node1 -&gt; node3
node3 -&gt; node4
node4 -&gt; node5 [label="choice is true"]
node4 -&gt; node6 [label="choice is false"]
node5 -&gt; node7
node7 -&gt; node2
node6 -&gt; node7
}
</code><div class="&#10;&#9;&#9;&#9;&#9;&#9;image &#10;&#9;&#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;center&#10;&#9;&#9;&#9;&#9;&#9;&#9; "><img alt="" title="" src="img/tutorial_example_06.png"/><span class="image_title"/></div><a name="workflow-execution-usage"></a><a name="id14"></a><h3>Workflow Execution Usage</h3><p>For examples on how to execute workflows see the <a href="introduction_WorkflowDatabaseTiein.html">WorkflowDatabaseTiein</a> tutorial.</p><a name="execution-plugins"></a><a name="id15"></a><h4>Execution Plugins</h4><p>The workflow engine can be customized and extended through a plugin system. A plugin is an object of a class that extends <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowExecutionPlugin.html'>ezcWorkflowExecutionPlugin</a> and that is registered with the execution object using the addPlugin() method.</p><p>The following methods are automatically invoked during the workflow execution after the respective event has been handled:</p><ul><li><p>afterExecutionStarted()</p></li><li><p>afterExecutionSuspended()</p></li><li><p>afterExecutionResumed()</p></li><li><p>afterExecutionCancelled()</p></li><li><p>afterExecutionEnded()</p></li><li><p>afterNodeActivated()</p></li><li><p>afterNodeExecuted()</p></li><li><p>afterThreadStarted()</p></li><li><p>afterThreadEnded()</p></li><li><p>afterVariableSet()</p></li><li><p>afterVariableUnset()</p></li></ul><p>The above methods only allow read access to the events that they handle and are usually used to log workflow execution.</p><p>The following methods are automatically invoked during the workflow execution before the respective event is handled:</p><ul><li><p>beforeNodeActivated()</p></li><li><p>beforeVariableSet()</p></li><li><p>beforeVariableUnset()</p></li></ul><p>The above methods allow both read and write access to the events that they handle and may be used to change the behaviour of the workflow execution.</p><p>The WorkflowSignalSlotTiein component allows you to hook into the workflow execution into using the SignalSlot component. Details can be found in its documentation.</p><a name="execution-listeners"></a><a name="id16"></a><h4>Execution Listeners</h4><p>Objects of classes that implement the <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowExecutionListener.html'>ezcWorkflowExecutionListener</a> interface can be registered as listeners with an <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowExecution.html'>ezcWorkflowExecution</a> object to receive messages during the execution of a workflow.</p><p>The <a href='/zetacomponents/documentation/trunk/Workflow/phpdoc/ezcWorkflowEventLogListener.html'>ezcWorkflowEventLogListener</a> class that is provided by the <a href="introduction_WorkflowEventLogTiein.html">WorkflowEventLogTiein</a> component is the reference implementation of this interface. You can find an example on how to register execution listeners in its documentation.</p><!--Local Variables:
mode: rst
fill-column: 79
End:
vim: et syn=rst tw=79-->

	</div>

	<div class="footer">
	Copyright © 2010 <a href="http://apache.org">The Software Foundation</a>
</div>
</div>
</body>
</html>
