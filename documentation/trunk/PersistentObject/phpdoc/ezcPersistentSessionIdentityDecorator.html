<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en"
	lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="description" content="Zeta Components - reusable set of high quality PHP components to fasten your development." />
	<meta name="keywords" content="PHP, apache, components, framework, quality" />
	<meta name="author" content="dotxp" />
	<meta name="language" content="en" />
	<meta name="date" content="Wed, 04 Aug 2010 13:07:53 +0200" />
	<meta name="robots" content="all" />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.title" content="ezcPersistentSessionIdentityDecorator.html" />
	<meta name="DC.creator" content="dotxp" />
	<meta name="DC.date" content="Wed, 04 Aug 2010 13:07:53 +0200" />
	<meta name="DC.rights" content="Copyright" />

	<link rel="meta" href="/documentation/trunk/PersistentObject/phpdoc/ezcPersistentSessionIdentityDecorator.rdf" />
	<link rel="icon" href="/images/favicon.png" type="image/png" />

	<link rel="Stylesheet" type="text/css" href="/styles/screen.css" media="screen" />
	<link rel="Stylesheet" type="text/css" href="/styles/print.css" media="print" />


	<title>Zeta Components - high quality PHP components</title>
</head>
<body>
<div id="wcv">
	<h1>
		<a id="header-png" href="" title="Zeta Components - high quality PHP components">
			Zeta Components - high quality PHP components
		</a>
	</h1>

	<ul class="navigation">
<li >
	<a href="/news.html" title="About">About</a>
	</li>
<li >
	<a href="/community/index.html" title="Community">Community</a>
	</li>
<li class="requested">
	<a href="/documentation/overview.html" title="Documentation">Documentation</a>
	</li>
<li >
	<a href="/download/index.html" title="Download">Download</a>
	</li>
<li >
	<a href="/support.html" title="Support">Support</a>
	</li>

</ul>
<ul class="subnavigation">
<li >
	<a href="/documentation/overview.html" title="Overview">Overview</a>
	</li>
<li >
	<a href="/documentation/install.html" title="Installation">Installation</a>
	</li>

</ul>

	<div class="content">
    <ul class="tabs">
    <li >
	<a href="/documentation/trunk/PersistentObject/tutorial.html" title="Tutorial">Tutorial</a>
	</li>
<li class="requested">
	<a href="/documentation/trunk/PersistentObject/phpdoc/classtrees.html" title="API">API</a>
	</li>

</ul>

		
  <div class="phpdoc">
    <h2>Zeta Components Manual :: Docs For Class ezcPersistentSessionIdentityDecorator</h2>

                  <h3>PersistentObject::ezcPersistentSessionIdentityDecorator</h3>
    
<a name="sec-description"></a>
<h3>Class ezcPersistentSessionIdentityDecorator</h3>

<p>This class decorates ezcPersistentSession with facilities of the identity map pattern.</p><div><p>An instance of this class is used to decorate an <a href="ezcPersistentSession.html">ezcPersistentSession</a> with the facilities of the identity map pattern  (similar to {@see http://martinfowler.com/eaaCatalog/identityMap.html}).</p><p>The identity map pattern avoids inconsistencies in your application, by  avoiding that the same database object exists in multiple different object  instances. If your request the same object a second time, the already  existing instance is returned instead of creating a new one. This can also  save you some SQL queries and therefore database load, but this is not the  primary target of the pattern.</p><p>In addition to the identity map pattern, this class caches sets of related  objects (see <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a>) and allows you to pre-fetch nested  related objects, using SQL joins (<a href="ezcPersistentSessionIdentityDecorator.html#methodloadWithRelatedObjects">loadWithRelatedObjects()</a>, <a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQueryWithRelations">createFindQueryWithRelations()</a>). This can reduce database load  significantly.</p><p>An instance of this class can replace an <a href="ezcPersistentSession.html">ezcPersistentSession</a>  transparently, since it fulfills the same interface. To use it, you need the  original session, an instance of <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a> and  potentially <a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a>. The  creation of the decorated session works as follows:</p><p></p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-comm">//&#8192;$originalSession&#8192;contains&#8192;a&#8192;valid&#8192;instance&#8192;of&#8192;ezcPersistentSession</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$identityMap&#8192;</span>=&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentBasicIdentityMap.html">ezcPersistentBasicIdentityMap</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$originalSession</span><span class="src-sym">-&gt;</span><span class="src-id">definitionManager</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$identitySession&#8192;</span>=&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentSessionIdentityDecorator.html">ezcPersistentSessionIdentityDecorator</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$originalSession</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$identityMap</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol><p>You can now transparently replace $originalSession and $identitySession in  most cases. Only the methods <a href="ezcPersistentSessionIdentityDecorator.html#methodupdateFromQuery">updateFromQuery()</a> and <a href="ezcPersistentSessionIdentityDecorator.html#methoddeleteFromQuery">deleteFromQuery()</a> won't work properly, since the identity map cannot trace  the changes produced by this method in the database. Attention: Calling  these methods will result in a complete reset of the identity map!</p><p>Using the $options property, you can temporarely activate refetching of  objects. Be careful with this option! While this is set to true, all object  identities will be created from scratch and existing ones will be replaced.  This is usually not desired! Use <a href="ezcPersistentSessionIdentityDecorator.html#methodrefresh">refresh()</a> to update object values  from database instead.</p></div>
<p>Source for this file: <a href="http://fisheye6.atlassian.com/browse/zetacomponents/trunk/PersistentObject/src/session_decorators/identity.php?r=HEAD">/PersistentObject/src/session_decorators/identity.php</a></p>
       
  <h3>Implements interfaces:</h3>
  <ul><li><a href="ezcPersistentSessionFoundation.html">ezcPersistentSessionFoundation</a></li>  </ul><table><tr><td>
            <strong>Version:</strong>&#8192;&#8192;
          </td>
          <td>//autogen//</td>
        </tr></table><a name="sec-prop-summary"></a>
  <h3>Properties</h3>
  <table class="summary"><tr><td class="right">
          <a name="prop%24identityMap" id="$identityMap"></a>
          <a name="prop-%24identityMap" id="$identityMap"></a>
          <em><a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a></em>        </td>
        <td class="right">
          <em>read</em>
        </td>
        <td>
          <code>
            <a href="#prop-%24identityMap" title="details" class="var-name-summary">$identityMap</a>
                      </code>
          <br><div style="margin-left: 20px">Identity map used by this session. You should usually not                 access this property directly.</div>        </td>
      </tr><tr><td class="right">
          <a name="prop%24options" id="$options"></a>
          <a name="prop-%24options" id="$options"></a>
          <em><a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a></em>        </td>
        <td class="right">
          <em>read/write</em>
        </td>
        <td>
          <code>
            <a href="#prop-%24options" title="details" class="var-name-summary">$options</a>
                      </code>
          <br><div style="margin-left: 20px">Options to influence the behaviour of the session.</div>        </td>
      </tr></table><a name="sec-var-summary"></a>
  <h3>Member Variables</h3>
  <table class="summary"><tr><td class="right">
            <em>protected</em>            <em><a href="ezcPersistentSession.html">ezcPersistentSession</a></em>          </td>
          <td>
            <code>
              $session
                          </code>
            <br><div style="margin-left: 20px">The persistent session this object wraps.</div>                      </td>
        </tr></table><a name="sec-method-summary"></a>
  <h3>Method Summary</h3>
  <table class="summary"><tr><td class="right">
            <em>public</em>                        <em>ezcPersistentSessionIdentityDecorator</em>          </td>
          <td>
            <code>
              <a href="#__construct"><b>__construct</b></a>(
                                                                                    $session
                                                    ,                                     $identityMap
                                                    ,                   [                  $options
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Creates a new identity map decorator.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#addRelatedObject"><b>addRelatedObject</b></a>(
                                                                                    $object
                                                    ,                                     $relatedObject
                                                    ,                   [                  $relationName
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Create a relation between $object and $relatedObject.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="/documentation/trunk/Database/phpdoc/ezcQueryDelete.html">ezcQueryDelete</a></em>          </td>
          <td>
            <code>
              <a href="#createDeleteQuery"><b>createDeleteQuery</b></a>(
                                                                                    $class
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns a delete query for the given persistent object $class.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a></em>          </td>
          <td>
            <code>
              <a href="#createFindQuery"><b>createFindQuery</b></a>(
                                                                                    $class
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns a select query for the given persistent object $class.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcPersistentFindWithRelationsQuery.html">ezcPersistentFindWithRelationsQuery</a></em>          </td>
          <td>
            <code>
              <a href="#createFindQueryWithRelations"><b>createFindQueryWithRelations</b></a>(
                                                                                    $class
                                                    ,                                     $relations
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns a select query for the given $class and its related objects as  defined in $relations.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcPersistentRelationFindQuery.html">ezcPersistentRelationFindQuery</a></em>          </td>
          <td>
            <code>
              <a href="#createRelationFindQuery"><b>createRelationFindQuery</b></a>(
                                                                                    $object
                                                    ,                                     $relatedClass
                                                    ,                   [                  $relationName
                   = null]                                  ,                   [                  $setName
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Returns the base query for retrieving related objects.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="/documentation/trunk/Database/phpdoc/ezcQuerySubSelect.html">ezcQuerySubSelect</a></em>          </td>
          <td>
            <code>
              <a href="#createSubQuery"><b>createSubQuery</b></a>(
                                                                                    $parentQuery
                                                    ,                                     $class
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns a sub-select for the given $class to be used with $parentQuery.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="/documentation/trunk/Database/phpdoc/ezcQueryUpdate.html">ezcQueryUpdate</a></em>          </td>
          <td>
            <code>
              <a href="#createUpdateQuery"><b>createUpdateQuery</b></a>(
                                                                                    $class
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns an update query for the given persistent object $class.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#delete"><b>delete</b></a>(
                                                                                    $object
                                                 )
            </code>
            <br><div style="margin-left: 20px">Deletes the persistent $object.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#deleteFromQuery"><b>deleteFromQuery</b></a>(
                                                                                    $query
                                                 )
            </code>
            <br><div style="margin-left: 20px">Deletes persistent objects using the given $query.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>array(object($class))</em>          </td>
          <td>
            <code>
              <a href="#find"><b>find</b></a>(
                                                                                    $query
                                                    ,                   [                  $class
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Returns the result of the $query as an array of objects.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcPersistentIdentityFindIterator.html">ezcPersistentIdentityFindIterator</a></em>          </td>
          <td>
            <code>
              <a href="#findIterator"><b>findIterator</b></a>(
                                                                                    $query
                                                    ,                   [                  $class
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Returns the result of $query for the $class as an iterator.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>array(string=&gt;string)</em>          </td>
          <td>
            <code>
              <a href="#generateAliasMap"><b>generateAliasMap</b></a>(
                                                                                    $def
                                                    ,                   [                  $prefixTableName
                   = true]                               )
            </code>
            <br><div style="margin-left: 20px">Returns a hash map between property and column name for the given  definition $def.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>array(int=&gt;string)</em>          </td>
          <td>
            <code>
              <a href="#getColumnsFromDefinition"><b>getColumnsFromDefinition</b></a>(
                                                                                    $def
                                                    ,                   [                  $prefixTableName
                   = true]                               )
            </code>
            <br><div style="margin-left: 20px">Returns all the columns defined in the persistent object.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>object($relatedClass)</em>          </td>
          <td>
            <code>
              <a href="#getRelatedObject"><b>getRelatedObject</b></a>(
                                                                                    $object
                                                    ,                                     $relatedClass
                                                    ,                   [                  $relationName
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Returns the related object of a given $relatedClass for $object.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>array(int=&gt;object($relatedClass))</em>          </td>
          <td>
            <code>
              <a href="#getRelatedObjects"><b>getRelatedObjects</b></a>(
                                                                                    $object
                                                    ,                                     $relatedClass
                                                    ,                   [                  $relationName
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Returns the related objects of a given $relatedClass for $object.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>array(ezcPersistentObject)|null</em>          </td>
          <td>
            <code>
              <a href="#getRelatedObjectSubset"><b>getRelatedObjectSubset</b></a>(
                                                                                    $object
                                                    ,                                     $setName
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns the named related object subset with $setName for $object.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>bool</em>          </td>
          <td>
            <code>
              <a href="#isRelated"><b>isRelated</b></a>(
                                                                                    $sourceObject
                                                    ,                                     $relatedObject
                                                    ,                   [                  $relationName
                   = null]                                  ,                                     $sourceObj
                                                    ,                                     $relatedObj
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns if $relatedObject is related to $sourceObject.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em>          </td>
          <td>
            <code>
              <a href="#load"><b>load</b></a>(
                                                                                    $class
                                                    ,                                     $id
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns the persistent object of class $class with id $id.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcPersistentObject.html">ezcPersistentObject</a>|null</em>          </td>
          <td>
            <code>
              <a href="#loadIfExists"><b>loadIfExists</b></a>(
                                                                                    $class
                                                    ,                                     $id
                                                 )
            </code>
            <br><div style="margin-left: 20px">Returns the persistent object of class $class with id $id or null.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#loadIntoObject"><b>loadIntoObject</b></a>(
                                                                                    $object
                                                    ,                                     $id
                                                 )
            </code>
            <br><div style="margin-left: 20px">Loads the persistent object of $class with $id into the given $object.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em>          </td>
          <td>
            <code>
              <a href="#loadWithRelatedObjects"><b>loadWithRelatedObjects</b></a>(
                                                                                    $class
                                                    ,                                     $id
                                                    ,                                     $relations
                                                 )
            </code>
            <br><div style="margin-left: 20px">Loads an object of $class with $id and related objects defined by $relations.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#refresh"><b>refresh</b></a>(
                                                                                    $object
                                                 )
            </code>
            <br><div style="margin-left: 20px">Syncronizes the contents of $object with the database.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#removeRelatedObject"><b>removeRelatedObject</b></a>(
                                                                                    $object
                                                    ,                                     $relatedObject
                                                    ,                   [                  $relationName
                   = null]                               )
            </code>
            <br><div style="margin-left: 20px">Removes the relation between $object and $relatedObject.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#save"><b>save</b></a>(
                                                                                    $object
                                                 )
            </code>
            <br><div style="margin-left: 20px">Saves the new persistent object $object to the database using an INSERT INTO query.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#saveOrUpdate"><b>saveOrUpdate</b></a>(
                                                                                    $object
                                                 )
            </code>
            <br><div style="margin-left: 20px">Saves or updates the persistent $object to the database.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#update"><b>update</b></a>(
                                                                                    $object
                                                 )
            </code>
            <br><div style="margin-left: 20px">Updates $object in the database using an UPDATE query.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#updateFromQuery"><b>updateFromQuery</b></a>(
                                                                                    $query
                                                 )
            </code>
            <br><div style="margin-left: 20px">Updates persistent objects using the query $query.</div>          </td>
        </tr></table><a name="sec-methods"></a>
  <h3>Methods</h3>
  <a name="method_detail"></a>
                                                        
      <a name="method__construct" id="__construct"><!-- --></a>

    <h4>__construct</h4>

    <div class="method-signature">
      ezcPersistentSessionIdentityDecorator
      __construct(
                                  <a href="ezcPersistentSession.html">ezcPersistentSession</a>
          $session
                            ,           <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a>
          $identityMap
                            ,           [<a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a>
          $options
           = null]              )
    </div>

    <p>Creates a new identity map decorator.</p><div><p>This identity map decorator wraps around $session and makes use of this  to issue the actual database operations. Object identities are stored in  the $identityMap. The $options influence the behavior of the identity  session, like setting the $refetch option to force reloading of objects.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$session</code></td>
              <td><em><a href="ezcPersistentSession.html">ezcPersistentSession</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$identityMap</code></td>
              <td><em><a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$options</code></td>
              <td><em><a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodaddRelatedObject" id="addRelatedObject"><!-- --></a>

    <h4>addRelatedObject</h4>

    <div class="method-signature">
      void
      addRelatedObject(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                            ,           <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $relatedObject
                            ,           [string
          $relationName
           = null]              )
    </div>

    <p>Create a relation between $object and $relatedObject.</p><div><p>This method is used to create a relation between the given source  $object and the desired $relatedObject. The related object is not stored  in the database automatically, only the desired properties are set. An  exception is {@ezcPersistentManyToManyRelation}s, where the relation  record is stored automatically and there is no need to store  $relatedObject explicitly after establishing the relation.</p><p>If there are multiple relations defined between the class of $object and  $relatedObject (via ezcPersistentRelationCollection), the  $relationName parameter becomes mandatory to determine, which exact  relation should be used.</p><p>Newly added related objects are stored in the identity map and added to  recorded relation sets. If not set of related object set is recorded,  yet, the adding is ignored.</p><p>Note: All named related object sets (see <a href="ezcPersistentFindWithRelationsQuery.html">ezcPersistentFindWithRelationsQuery</a>) for $object are invalidated and  removed from the identity map, to avoid inconsistencies.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relatedObject</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relationName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentRelationNotFoundException.html">ezcPersistentRelationNotFoundException</a></code></td>
              <td>
                                  if the deisred relation is not defined.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentRelationOperationNotSupportedException.html">ezcPersistentRelationOperationNotSupportedException</a></code></td>
              <td>
                                  if a relation to create is marked as "reverse" ezcPersistentRelation-&gt;reverse.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodaddRelatedObject">ezcPersistentSessionFoundation::addRelatedObject()</a></code></td>
              <td>
                                  Create a relation between $object and $relatedObject.
                              </td>
            </tr></tbody></table><a name="methodcreateDeleteQuery" id="createDeleteQuery"><!-- --></a>

    <h4>createDeleteQuery</h4>

    <div class="method-signature">
      <a href="/documentation/trunk/Database/phpdoc/ezcQueryDelete.html">ezcQueryDelete</a>
      createDeleteQuery(
                                  string
          $class
                        )
    </div>

    <p>Returns a delete query for the given persistent object $class.</p><div><p>The query is initialized to delete from the correct table and  it is only neccessary to set the where clause.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodcreateDeleteQuery">createDeleteQuery</a><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">where</span><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">expr</span><span class="src-sym">-&gt;</span><span class="src-id">gt</span><span class="src-sym">(&#8192;</span><span class="src-str">'age'</span><span class="src-sym">,&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">bindValue</span><span class="src-sym">(&#8192;</span><span class="src-num">15&#8192;</span><span class="src-sym">)&#8192;)&#8192;)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methoddeleteFromQuery">deleteFromQuery</a><span class="src-sym">(&#8192;</span><span class="src-var">$q&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol><p>Attention: If you use a query generated by this method to delete objects,  the internal <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a> will be completly reset.  This is neccessary to avoid inconsistencies, because the session cannot  trace which objects are deleted by the query.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if there is no such persistent class.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodcreateDeleteQuery">ezcPersistentSessionFoundation::createDeleteQuery()</a></code></td>
              <td>
                                  Returns a delete query for the given persistent object $class.
                              </td>
            </tr></tbody></table><a name="methodcreateFindQuery" id="createFindQuery"><!-- --></a>

    <h4>createFindQuery</h4>

    <div class="method-signature">
      <a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a>
      createFindQuery(
                                  string
          $class
                        )
    </div>

    <p>Returns a select query for the given persistent object $class.</p><div><p>The query is initialized to fetch all columns from the correct table and  has correct alias mappings between columns and property names of the  persistent $class. The alias mapping allows you to use property names in  WHERE conditions, instead of column names. These aliases will  automatically be resolved before querying the database.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery</a><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$allPersons&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find</a><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">,&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol><p>Example with aliases:  </p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery</a><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">where</span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">expr</span><span class="src-sym">-&gt;</span><span class="src-id">eq</span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'zipCode'</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">bindValue</span><span class="src-sym">(&#8192;</span><span class="src-num">12345&#8192;</span><span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;<span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$somePersons&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find</a><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">,&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol>  $zipCode is the property name in the Person class, while the  corresponding database column is named zip_code.</div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if there is no such persistent class.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodcreateFindQuery">ezcPersistentSessionFoundation::createFindQuery()</a></code></td>
              <td>
                                  Returns a select query for the given persistent object $class.
                              </td>
            </tr></tbody></table><a name="methodcreateFindQueryWithRelations" id="createFindQueryWithRelations"><!-- --></a>

    <h4>createFindQueryWithRelations</h4>

    <div class="method-signature">
      <a href="ezcPersistentFindWithRelationsQuery.html">ezcPersistentFindWithRelationsQuery</a>
      createFindQueryWithRelations(
                                  string
          $class
                            ,           
          $relations
                        )
    </div>

    <p>Returns a select query for the given $class and its related objects as  defined in $relations.</p><div><p>This method creates an instance of <a href="ezcPersistentFindWithRelationsQuery.html">ezcPersistentFindWithRelationsQuery</a>, which can basically be used like  <a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a> aka <a href="/documentation/trunk/Database/phpdoc/ezcQuerySelect.html">ezcQuerySelect</a>. The query  object is configured to load objects of $class and has JOIN statements  to load related objects as defined in $relations, in addition. You can  use the <a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find()</a> method to perform the actual find operation. This  one will return the objects of $class. The related objects can simply be  obtained using <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a>, <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObject">getRelatedObject()</a>  or getRelatedObjectSet() (see below). Calls to these methods the  work without issuing a new database queries, since the desired objects  are already stored in the <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a>.</p><p>The $relations array has the following structure:  </p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-key">array</span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relationAlias_1'&#8192;</span>=&gt;&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relatedClass_1'</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-id">null</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-key">array</span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'deeperAlias_1'&#8192;</span>=&gt;&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'deeperRelatedClass_1'</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relationAlias_2'&#8192;</span>=&gt;&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relatedClass_2'</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol><p>The keys of the array define aliases for relations to be used in the  local context. Each key has an object of <a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a> assigned, that defines which  relation is meant to be fetched. The first entry above assignes the  alias 'relationAlias_1' to the related class 'relatedClass_1'. The  second parameter to the constructor of {@linke ezcPersistentRelationFindDefinition} can be a relation name, if multiple  relations to the same class exist. The third parameter defines deeper  relations.</p><p>A call to this method with $class set to 'myClass' and $relations  defined as seen above creates a find query that by default finds:</p><p></p><ul><li>All objects of myClass</li><li>Foreach object of myClass, all related objects of relatedClass_1</li><li>Foreach object of myClass, all related objects of relatedClass_2</li><li>Foreach object of relatedClass_1, all related objects of deeperRelatedClass_1</li></ul>  The aliases defined as the keys of the $relations array can be used to  add where() conditions to the created query. Properties of the objects  of relatedClass_1 can be accessed by prefixing their name with  'relationAlias_1_' (for example 'relationAlias_1_id' to access the 'id'  property).<p>NOTE: If you restrict the objects to be found by a WHERE condition, not  the full set of related objects might be returned. To avoid  inconsistencies in the identity map, the extracted sets of related  objects will then not be registered as usual, but as <strong>named related
 sets</strong>. You can retrieve these using the getRelatedObjectSet()  method (instead of using <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a>), with the chosen  relation alias as the set name.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relations</code></td>
              <td><em>array(ezcPersistentRelationFindDefinition)</em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodcreateRelationFindQuery" id="createRelationFindQuery"><!-- --></a>

    <h4>createRelationFindQuery</h4>

    <div class="method-signature">
      <a href="ezcPersistentRelationFindQuery.html">ezcPersistentRelationFindQuery</a>
      createRelationFindQuery(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                            ,           string
          $relatedClass
                            ,           [string
          $relationName
           = null]                  ,           [string
          $setName
           = null]              )
    </div>

    <p>Returns the base query for retrieving related objects.</p><div><p>See <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObject">getRelatedObject()</a> and <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a>. Can be  modified by additional where conditions and simply be used with  <a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find()</a> and the related class name, to retrieve a sub-set of  related objects.</p><p>If multiple relations are defined for the $relatedClass (using ezcPersistentRelationCollection), the parameter $relationName becomes  mandatory to determine which relation definition to use. For normal  relations, this parameter is silently ignored.</p><p>If you provide a $setName, the resulting set of related objects fetched  by <a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find()</a> is cached under the given name for $object. You can  retrieve this set either through <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjectSubset">getRelatedObjectSubset()</a> or by  issueing the same query (or a query with the same $object and $setName)  again. Overwriting a once created named set can be enfored using the  'refetch' option in <a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a>.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relatedClass</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relationName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$setName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentRelationNotFoundException.html">ezcPersistentRelationNotFoundException</a></code></td>
              <td>
                                  if the given $object does not have a relation to $relatedClass.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodcreateRelationFindQuery">ezcPersistentSessionFoundation::createRelationFindQuery()</a></code></td>
              <td>
                                  Returns the base query for retrieving related objects.
                              </td>
            </tr></tbody></table><a name="methodcreateSubQuery" id="createSubQuery"><!-- --></a>

    <h4>createSubQuery</h4>

    <div class="method-signature">
      <a href="/documentation/trunk/Database/phpdoc/ezcQuerySubSelect.html">ezcQuerySubSelect</a>
      createSubQuery(
                                  <a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a>
          $parentQuery
                            ,           string
          $class
                        )
    </div>

    <p>Returns a sub-select for the given $class to be used with $parentQuery.</p><div><p>This method creates an <a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a> as a <a href="/documentation/trunk/Database/phpdoc/ezcQuerySubSelect.html">ezcQuerySubSelect</a> for the given $class. The returned query has already  set aliases for the properties of $class, but (in contrast to the query  returned by <a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery()</a>) does not have the selection of all  properties set. You need to do</p><p></p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$subSelect&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><span class="src-id">subSelect</span><span class="src-sym">(&#8192;</span><span class="src-var">$existingSelectQuery</span><span class="src-sym">,&#8192;</span><span class="src-str">'MyClass'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$subSelect</span><span class="src-sym">-&gt;</span><span class="src-id">select</span><span class="src-sym">(&#8192;</span><span class="src-str">'myField'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol><p>manually to select the fields you desire.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$parentQuery</code></td>
              <td><em><a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodcreateUpdateQuery" id="createUpdateQuery"><!-- --></a>

    <h4>createUpdateQuery</h4>

    <div class="method-signature">
      <a href="/documentation/trunk/Database/phpdoc/ezcQueryUpdate.html">ezcQueryUpdate</a>
      createUpdateQuery(
                                  string
          $class
                        )
    </div>

    <p>Returns an update query for the given persistent object $class.</p><div><p>The query is initialized to update the correct table and  it is only neccessary to set the correct values.</p><p>Attention: If you use a query generated by this method to update  objects, the internal <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a> will be completly  reset. This is neccessary to avoid inconsistencies, because the session  cannot trace which objects are updated by the query.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentDefinitionNotFoundException.html">ezcPersistentDefinitionNotFoundException</a></code></td>
              <td>
                                  if there is no such persistent class.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodcreateUpdateQuery">ezcPersistentSessionFoundation::createUpdateQuery()</a></code></td>
              <td>
                                  Returns an update query for the given persistent object $class.
                              </td>
            </tr></tbody></table><a name="methoddelete" id="delete"><!-- --></a>

    <h4>delete</h4>

    <div class="method-signature">
      void
      delete(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                        )
    </div>

    <p>Deletes the persistent $object.</p><div><p>This method will perform a DELETE query based on the identifier of the  persistent $object. After delete() the ID property of $object will be  reset to null. It is possible to <a href="ezcPersistentSessionIdentityDecorator.html#methodsave">save()</a> $object afterwards.  $object will then be stored with a new ID.</p><p>If you defined relations for the given object, these will be checked to  be defined as cascading. If cascading is configured, the related objects  with this relation will be deleted, too.</p><p>The object will also be removed from the identity map and all related  object sets in it.</p><p>Relations that support cascading are:  </p><ul><li>ezcPersistenOneToManyRelation</li><li>ezcPersistenOneToOne</li></ul></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                                  The persistent object to delete.
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>ezcPersistentDefinitionNotFoundxception</code></td>
              <td>
                                  if $the object is not recognized as a persistent object.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectNotPersistentException.html">ezcPersistentObjectNotPersistentException</a></code></td>
              <td>
                                  if the object is not persistent already.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentQueryException.html">ezcPersistentQueryException</a></code></td>
              <td>
                                  if the object could not be deleted.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methoddelete">ezcPersistentSessionFoundation::delete()</a></code></td>
              <td>
                                  Deletes the persistent object $object.
                              </td>
            </tr></tbody></table><a name="methoddeleteFromQuery" id="deleteFromQuery"><!-- --></a>

    <h4>deleteFromQuery</h4>

    <div class="method-signature">
      void
      deleteFromQuery(
                                  
          $query
                        )
    </div>

    <p>Deletes persistent objects using the given $query.</p><div><p>The $query should be created using <a href="ezcPersistentSessionIdentityDecorator.html#methodcreateDeleteQuery">createDeleteQuery()</a>.</p><p>Attention: Every call to this method will cause the internal <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a> to be completly reset. This is neccessary to  avoid inconsistencies, because the session cannot trace which objects  are updated by the query.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$query</code></td>
              <td><em><a href="/documentation/trunk/Database/phpdoc/ezcQueryDelete.html">ezcQueryDelete</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentQueryException.html">ezcPersistentQueryException</a></code></td>
              <td>
                                  if the delete query failed.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methoddeleteFromQuery">ezcPersistentSessionFoundation::deleteFromQuery()</a></code></td>
              <td>
                                  Deletes persistent objects using the query $query.
                              </td>
            </tr></tbody></table><a name="methodfind" id="find"><!-- --></a>

    <h4>find</h4>

    <div class="method-signature">
      array(object($class))
      find(
                                  <a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a>|<a href="/documentation/trunk/Database/phpdoc/ezcQuerySelect.html">ezcQuerySelect</a>
          $query
                            ,           [string
          $class
           = null]              )
    </div>

    <p>Returns the result of the $query as an array of objects.</p><div><p>Returns the persistent objects found for $class using the submitted  $query. $query should be created using <a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery()</a> to  ensure correct alias mappings and can be manipulated as needed. The  $class parameter is optional, since <a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a> now  stores this information on creation using <a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery()</a>.</p><p>The array returned by this method is indexed by the IDs of the contained  objects. The order of the array reflects the order in the database or as  indicated by the ORDER BY clause of the query.</p><p>The results fetched will be checked for identities that have already  been recorded before. If an existing identity is found for an object,  this identity will be used in the result set. Note: This does not  prevent the database query at all, but just ensures consistency.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery</a><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$allPersons&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find</a><span class="src-sym">(&#8192;</span><span class="src-var">$q&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol><p>If you are retrieving large result set, consider using <a href="ezcPersistentSessionIdentityDecorator.html#methodfindIterator">findIterator()</a> instead.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery</a><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$objects&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodfindIterator">findIterator</a><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">,&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-key">foreach</span><span class="src-sym">(&#8192;</span><span class="src-var">$objects&#8192;</span><span class="src-key">as&#8192;</span><span class="src-var">$object&#8192;</span><span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-comm">//&#8192;...</span></div></li>
<li><div class="src-line">&#8192;<span class="src-sym">}</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol><p>Identity mapping comes into action in the following example:  </p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-var">$person&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodload">load</a><span class="src-sym">(&#8192;</span><span class="src-str">'Person'</span><span class="src-sym">,&#8192;</span><span class="src-num">23&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQuery">createFindQuery</a><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$allPersons&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find</a><span class="src-sym">(&#8192;</span><span class="src-var">$q&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol>  In $allPersons, the object with ID 23 will not be a new instance, but  the existing instance, that was already fetched by the call to <a href="ezcPersistentSessionIdentityDecorator.html#methodload">load()</a>.</div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$query</code></td>
              <td><em><a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a>|<a href="/documentation/trunk/Database/phpdoc/ezcQuerySelect.html">ezcQuerySelect</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentDefinitionNotFoundException.html">ezcPersistentDefinitionNotFoundException</a></code></td>
              <td>
                                  if there is no such persistent class.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentQueryException.html">ezcPersistentQueryException</a></code></td>
              <td>
                                  if the find query failed.
                              </td>
            </tr><tr><td><code><a href="/documentation/trunk/Base/phpdoc/ezcBaseValueException.html">ezcBaseValueException</a></code></td>
              <td>
                                  if $query parameter is not an instance of ezcPersistentFindQuery or ezcQuerySelect. Or if $class is missing if you use ezcQuerySelect.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodfind">ezcPersistentSessionFoundation::find()</a></code></td>
              <td>
                                  Returns the result of the query $query as a list of objects.
                              </td>
            </tr></tbody></table><a name="methodfindIterator" id="findIterator"><!-- --></a>

    <h4>findIterator</h4>

    <div class="method-signature">
      <a href="ezcPersistentIdentityFindIterator.html">ezcPersistentIdentityFindIterator</a>
      findIterator(
                                  <a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a>|<a href="/documentation/trunk/Database/phpdoc/ezcQuerySelect.html">ezcQuerySelect</a>
          $query
                            ,           [string
          $class
           = null]              )
    </div>

    <p>Returns the result of $query for the $class as an iterator.</p><div><p>This method is similar to <a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find()</a> but returns an <a href="ezcPersistentIdentityFindIterator.html">ezcPersistentIdentityFindIterator</a> instead of an array of objects. This  is useful if you are going to loop over the objects and just need them  one at the time. Because you only instantiate one object it is faster  than <a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find()</a>. In addition, only 1 record is retrieved from the  database in each iteration, which may reduce the data transfered between  the database and PHP, if you iterate only through a small subset of the  affected records.</p><p>Note that if you do not loop over the complete result set you must call  <a href="ezcPersistentFindIterator.html#methodflush">ezcPersistentFindIterator::flush()</a> before issuing another query.</p><p>The find interator will automatically look up result objects in the  identity map and return existing identities, if they have already been  recorded.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$query</code></td>
              <td><em><a href="ezcPersistentFindQuery.html">ezcPersistentFindQuery</a>|<a href="/documentation/trunk/Database/phpdoc/ezcQuerySelect.html">ezcQuerySelect</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentDefinitionNotFoundException.html">ezcPersistentDefinitionNotFoundException</a></code></td>
              <td>
                                  if there is no such persistent class.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentQueryException.html">ezcPersistentQueryException</a></code></td>
              <td>
                                  if the find query failed.
                              </td>
            </tr><tr><td><code><a href="/documentation/trunk/Base/phpdoc/ezcBaseValueException.html">ezcBaseValueException</a></code></td>
              <td>
                                  if $query parameter is not an instance of ezcPersistentFindQuery or ezcQuerySelect. Or if $class is missing if you use ezcQuerySelect.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodfindIterator">ezcPersistentSessionFoundation::findIterator()</a></code></td>
              <td>
                                  Returns the result of $query for the $class as an iterator.
                              </td>
            </tr></tbody></table><a name="methodgenerateAliasMap" id="generateAliasMap"><!-- --></a>

    <h4>generateAliasMap</h4>

    <div class="method-signature">
      array(string=&gt;string)
      generateAliasMap(
                                  <a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a>
          $def
                            ,           [bool
          $prefixTableName
           = true]              )
    </div>

    <p>Returns a hash map between property and column name for the given  definition $def.</p><div><p>The alias map can be used with the query classes. If $prefixTableName is  set to false, only the column names are used as alias targets.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$def</code></td>
              <td><em><a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a></em></td>
              <td>
                                  Definition.
                              </td>
            </tr><tr><td><code>$prefixTableName</code></td>
              <td><em>bool</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodgenerateAliasMap">ezcPersistentSessionFoundation::generateAliasMap()</a></code></td>
              <td>
                                  Returns a hash map between property and column name for the given  definition $def.
                              </td>
            </tr></tbody></table><a name="methodgetColumnsFromDefinition" id="getColumnsFromDefinition"><!-- --></a>

    <h4>getColumnsFromDefinition</h4>

    <div class="method-signature">
      array(int=&gt;string)
      getColumnsFromDefinition(
                                  <a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a>
          $def
                            ,           [bool
          $prefixTableName
           = true]              )
    </div>

    <p>Returns all the columns defined in the persistent object.</p><div><p>If $prefixTableName is set to false, raw column names will be used,  without prefixed table name.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$def</code></td>
              <td><em><a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a></em></td>
              <td>
                                  Defintion.
                              </td>
            </tr><tr><td><code>$prefixTableName</code></td>
              <td><em>bool</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodgetColumnsFromDefinition">ezcPersistentSessionFoundation::getColumnsFromDefinition()</a></code></td>
              <td>
                                  Returns all the columns defined in the persistent object.
                              </td>
            </tr></tbody></table><a name="methodgetRelatedObject" id="getRelatedObject"><!-- --></a>

    <h4>getRelatedObject</h4>

    <div class="method-signature">
      object($relatedClass)
      getRelatedObject(
                                  object
          $object
                            ,           string
          $relatedClass
                            ,           [string
          $relationName
           = null]              )
    </div>

    <p>Returns the related object of a given $relatedClass for $object.</p><div><p>This method returns the related object of type $relatedClass for the  object $object. This method (in contrast to <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a>)  always returns a single result object, no matter if more related objects  could be found (e.g. <a href="ezcPersistentOneToManyRelation.html">ezcPersistentOneToManyRelation</a>). If no  related object is found, an exception is thrown, while <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a> just returns an empty array in this case.</p><p>In case the related object has already been fetched earlier, the request  to the database is not repeated, but the recorded object is returned. If  the related object was not recorded, yet, it is fetched from the  database and recorded afterwards.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-var">$person&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodload">load</a><span class="src-sym">(&#8192;</span><span class="src-str">"Person"</span><span class="src-sym">,&#8192;</span><span class="src-num">1&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$relatedAddress&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObject">getRelatedObject</a><span class="src-sym">(&#8192;</span><span class="src-var">$person</span><span class="src-sym">,&#8192;</span><span class="src-str">"Address"&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;echo&#8192;<span class="src-str">"Address&#8192;of&#8192;this&#8192;person:&#8192;"&#8192;</span>.&#8192;<span class="src-var">$relatedAddress</span><span class="src-sym">-&gt;</span><span class="src-id">__toString</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol><p>Relations that should preferably be used with this method are:  </p><ul><li><a href="ezcPersistentManyToOneRelation.html">ezcPersistentManyToOneRelation</a></li><li><a href="ezcPersistentOneToOneRelation.html">ezcPersistentOneToOneRelation</a></li></ul>  For other relation types <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a> is recommended.<p>If multiple relations are defined for the $relatedClass (using ezcPersistentRelationCollection), the parameter $relationName becomes  mandatory to determine which relation definition to use. For normal  relations, this parameter is silently ignored.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em>object</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relatedClass</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relationName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentRelationNotFoundException.html">ezcPersistentRelationNotFoundException</a></code></td>
              <td>
                                  if the given $object does not have a relation to $relatedClass.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodgetRelatedObject">ezcPersistentSessionFoundation::getRelatedObject()</a></code></td>
              <td>
                                  Returns the related object of a given $relatedClass for an $object.
                              </td>
            </tr></tbody></table><a name="methodgetRelatedObjects" id="getRelatedObjects"><!-- --></a>

    <h4>getRelatedObjects</h4>

    <div class="method-signature">
      array(int=&gt;object($relatedClass))
      getRelatedObjects(
                                  object
          $object
                            ,           string
          $relatedClass
                            ,           [string
          $relationName
           = null]              )
    </div>

    <p>Returns the related objects of a given $relatedClass for $object.</p><div><p>This method returns the related objects of type $relatedClass for the  given $object. This method (in contrast to <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObject">getRelatedObject()</a>)  always returns an array of found objects, no matter if only 1 object  was found (e.g. <a href="ezcPersistentManyToOneRelation.html">ezcPersistentManyToOneRelation</a>), none or several  (<a href="ezcPersistentManyToManyRelation.html">ezcPersistentManyToManyRelation</a>).</p><p>In case the set of related objects has already been fetched earlier, the  request to the database is not repeated, but the recorded object set is  returned. If the set of related objects was not recorded, yet, it is  fetched from the database and recorded afterwards.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-var">$person&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodload">load</a><span class="src-sym">(&#8192;</span><span class="src-str">"Person"</span><span class="src-sym">,&#8192;</span><span class="src-num">1&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$relatedAddresses&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects</a><span class="src-sym">(&#8192;</span><span class="src-var">$person</span><span class="src-sym">,&#8192;</span><span class="src-str">"Address"&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;echo&#8192;<span class="src-str">"Number&#8192;of&#8192;addresses&#8192;found:&#8192;"&#8192;</span>.&#8192;<a href="http://www.php.net/count">count</a><span class="src-sym">(&#8192;</span><span class="src-var">$relatedAddresses&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol><p>Relations that should preferably be used with this method are:  </p><ul><li><a href="ezcPersistentOneToManyRelation.html">ezcPersistentOneToManyRelation</a></li><li><a href="ezcPersistentManyToManyRelation.html">ezcPersistentManyToManyRelation</a></li></ul>  For other relation types <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObject">getRelatedObject()</a> is recommended.<p>If multiple relations are defined for the $relatedClass (using ezcPersistentRelationCollection), the parameter $relationName becomes  mandatory to determine which relation definition to use. For normal  relations, this parameter is silently ignored.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em>object</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relatedClass</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relationName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentRelationNotFoundException.html">ezcPersistentRelationNotFoundException</a></code></td>
              <td>
                                  if the given $object does not have a relation to $relatedClass.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodgetRelatedObjects">ezcPersistentSessionFoundation::getRelatedObjects()</a></code></td>
              <td>
                                  Returns the related objects of a given $relatedClass for an $object.
                              </td>
            </tr></tbody></table><a name="methodgetRelatedObjectSubset" id="getRelatedObjectSubset"><!-- --></a>

    <h4>getRelatedObjectSubset</h4>

    <div class="method-signature">
      array(ezcPersistentObject)|null
      getRelatedObjectSubset(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                            ,           string
          $setName
                        )
    </div>

    <p>Returns the named related object subset with $setName for $object.</p><div><p>This method is used to retrieve named subsets of related objects created  by using <a href="ezcPersistentSessionIdentityDecorator.html#methodfind">find()</a> with a restricted <a href="ezcPersistentFindWithRelationsQuery.html">ezcPersistentFindWithRelationsQuery</a> created by <a href="ezcPersistentSessionIdentityDecorator.html#methodcreateFindQueryWithRelations">createFindQueryWithRelations()</a>.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$setName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodisRelated" id="isRelated"><!-- --></a>

    <h4>isRelated</h4>

    <div class="method-signature">
      bool
      isRelated(
                                  
          $sourceObject
                            ,           
          $relatedObject
                            ,           [string
          $relationName
           = null]                  ,           <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $sourceObj
                            ,           <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $relatedObj
                        )
    </div>

    <p>Returns if $relatedObject is related to $sourceObject.</p><div><p>Checks the relation conditions between $sourceObject and $relatedObject  and returns true, if $relatedObject is related to $sourceObject,  otherwise false. Relation state is determined through the identity map,  in case the relation between $sourceObject and $relatedObject has been  recorded there. Otherwise this method dispatches to  <a href="ezcPersistentSession.html#methodisRelated">ezcPersistentSession::isRelated()</a>.</p><p>In case multiple relations are defined between the  classes of $sourceObject and $relatedObject, the $relationName parameter  becomes mandatory. If it is not provided in this case, an <a href="ezcPersistentUndeterministicRelationException.html">ezcPersistentUndeterministicRelationException</a> is thrown.</p><p>Note that checking relations of type <a href="ezcPersistentManyToManyRelation.html">ezcPersistentManyToManyRelation</a> will issue a database query, if the  relation is not recorded in the identity map. Other relations will not  perform this query at all.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$sourceObj</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relatedObj</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relationName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$sourceObject</code></td>
              <td><em></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relatedObject</code></td>
              <td><em></em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodload" id="load"><!-- --></a>

    <h4>load</h4>

    <div class="method-signature">
      <a href="ezcPersistentObject.html">ezcPersistentObject</a>
      load(
                                  string
          $class
                            ,           mixed
          $id
                        )
    </div>

    <p>Returns the persistent object of class $class with id $id.</p><div><p>Checks if the object of $class with $id has already been loaded. If this  is the case, the existing identity is returned. Otherwise the desired  object is loaded from the database and its identity is recorded for  later uses.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$id</code></td>
              <td><em>mixed</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if there is no such persistent $class.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if the object is not available.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodload">ezcPersistentSessionFoundation::load()</a></code></td>
              <td>
                                  Returns the persistent object of class $class with id $id.
                              </td>
            </tr></tbody></table><a name="methodloadIfExists" id="loadIfExists"><!-- --></a>

    <h4>loadIfExists</h4>

    <div class="method-signature">
      <a href="ezcPersistentObject.html">ezcPersistentObject</a>|null
      loadIfExists(
                                  string
          $class
                            ,           int
          $id
                        )
    </div>

    <p>Returns the persistent object of class $class with id $id or null.</p><div><p>This method is equivalent to <a href="ezcPersistentSessionIdentityDecorator.html#methodload">load()</a> except that it returns null  instead of throwing an exception, if the desired object does not exist.  A null value will not be recorded in the identity map, so a second  attempt to load the object of $class with $id will result in another  database query.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$id</code></td>
              <td><em>int</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodloadIfExists">ezcPersistentSessionFoundation::loadIfExists()</a></code></td>
              <td>
                                  Returns the persistent object of class $class with id $id.
                              </td>
            </tr></tbody></table><a name="methodloadIntoObject" id="loadIntoObject"><!-- --></a>

    <h4>loadIntoObject</h4>

    <div class="method-signature">
      void
      loadIntoObject(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                            ,           mixed
          $id
                        )
    </div>

    <p>Loads the persistent object of $class with $id into the given $object.</p><div><p>The class of the persistent object to load is determined from $object.  In case an identity for the given $id has already been recorded in the  identity map and $object is not the same instance, an exception is  thrown.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$id</code></td>
              <td><em>mixed</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if the object is not available.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentIdentityAlreadyExistsException.html">ezcPersistentIdentityAlreadyExistsException</a></code></td>
              <td>
                                  if a different identity of the class of $object with $id already exists.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentDefinitionNotFoundException.html">ezcPersistentDefinitionNotFoundException</a></code></td>
              <td>
                                  if $object is not of a valid persistent object type.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentQueryException.html">ezcPersistentQueryException</a></code></td>
              <td>
                                  if the find query failed.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodloadIntoObject">ezcPersistentSessionFoundation::loadIntoObject()</a></code></td>
              <td>
                                  Loads the persistent object with the id $id into the object $object.
                              </td>
            </tr></tbody></table><a name="methodloadWithRelatedObjects" id="loadWithRelatedObjects"><!-- --></a>

    <h4>loadWithRelatedObjects</h4>

    <div class="method-signature">
      <a href="ezcPersistentObject.html">ezcPersistentObject</a>
      loadWithRelatedObjects(
                                  string
          $class
                            ,           string
          $id
                            ,           
          $relations
                        )
    </div>

    <p>Loads an object of $class with $id and related objects defined by $relations.</p><div><p>This method loads and returns the object of $class with $id. In  addition, all objects defined by $relations are loaded and fetched into  the identity map. Those can then be retrieved using <a href="ezcPersistentSessionIdentityDecorator.html#methodgetRelatedObjects">getRelatedObjects()</a>, without issueing further database queries.</p><p>Example for the $relations parameter:  </p><ol><li><div class="src-line">&#8192;<span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-key">array</span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relationAlias_1'&#8192;</span>=&gt;&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relatedClass_1'</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-id">null</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-key">array</span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'deeperAlias_1'&#8192;</span>=&gt;&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'deeperRelatedClass_1'</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span><span class="src-sym">,</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relationAlias_2'&#8192;</span>=&gt;&#8192;<span class="src-key">new&#8192;</span><span class="src-id"><a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a></span><span class="src-sym">(</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-str">'relatedClass_2'</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-php">?&gt;</span></div></li>
</ol><p>Each relation is defined by an <a href="ezcPersistentRelationFindDefinition.html">ezcPersistentRelationFindDefinition</a> struct This defines the related  class to load objects for, optionally a relation name (second parameter)  and possibly an array of deeper relations. All array keys on all levels  of the $relations parameter must be unique!</p><p>In the example, if $class is 'myClass' and $id is 23, the object of  myClass with ID 23 is loaded and returned. In addition, all objects of  relatedClass_1 and relatedClass_2, that related to the loaded object,  are loaded and stored in the identity map. For each of these objects of  class relatedClass_1, all related objects of class deeperRelatedClass_1  are loaded and also stored in the identity map.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$class</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$id</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$relations</code></td>
              <td><em>array(string=&gt;ezcPersistentRelationFindDefinition)</em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodrefresh" id="refresh"><!-- --></a>

    <h4>refresh</h4>

    <div class="method-signature">
      void
      refresh(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                        )
    </div>

    <p>Syncronizes the contents of $object with the database.</p><div><p>Note that calling this method is equavalent with calling <a href="ezcPersistentSessionIdentityDecorator.html#methodloadIntoObject">loadIntoObject()</a> on $object with the ID of $object. Any changes made  to $object prior to calling refresh() will be discarded.</p><p>The refreshing of an object will result in its identity being refreshed  automatically.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if $object is not of a valid persistent object type.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if $object is not persistent already.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if the select query failed.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodrefresh">ezcPersistentSessionFoundation::refresh()</a></code></td>
              <td>
                                  Syncronizes the contents of $object with those in the database.
                              </td>
            </tr></tbody></table><a name="methodremoveRelatedObject" id="removeRelatedObject"><!-- --></a>

    <h4>removeRelatedObject</h4>

    <div class="method-signature">
      void
      removeRelatedObject(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                            ,           <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $relatedObject
                            ,           [string
          $relationName
           = null]              )
    </div>

    <p>Removes the relation between $object and $relatedObject.</p><div><p>This method is used to delete an existing relation between 2 objects.  Like <a href="ezcPersistentSessionIdentityDecorator.html#methodaddRelatedObject">addRelatedObject()</a> this method does not store the related  object after removing its relation properties (unset), except for ezcPersistentManyToManyRelation()s, for which the relation record is  deleted from the database.</p><p>If between the classes of $object and $relatedObject multiple relations  are defined using a ezcPersistentRelationCollection, the  $relationName parameter becomes necessary. It defines which exact  relation to affect here.</p><p>Removal of related objects is reflected in the identity map  automatically and also in named related object sets.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                                  Source object of the relation.
                              </td>
            </tr><tr><td><code>$relatedObject</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                                  Related object.
                              </td>
            </tr><tr><td><code>$relationName</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentRelationNotFoundException.html">ezcPersistentRelationNotFoundException</a></code></td>
              <td>
                                  if the deisred relation is not defined.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentRelationOperationNotSupportedException.html">ezcPersistentRelationOperationNotSupportedException</a></code></td>
              <td>
                                  if a relation to create is marked as "reverse".
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodremoveRelatedObject">ezcPersistentSessionFoundation::removeRelatedObject()</a></code></td>
              <td>
                                  Removes the relation between $object and $relatedObject.
                              </td>
            </tr></tbody></table><a name="methodsave" id="save"><!-- --></a>

    <h4>save</h4>

    <div class="method-signature">
      void
      save(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                        )
    </div>

    <p>Saves the new persistent object $object to the database using an INSERT INTO query.</p><div><p>The correct ID is set to $object, if not using the <a href="ezcPersistentManualGenerator.html">ezcPersistentManualGenerator</a> (then you need to define the ID yourself).</p><p>Newly saved objects are stored in the identity map.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if $object is not of a valid persistent object type.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if the insert query failed.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if $object is already stored to the database.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if it was not possible to generate a unique identifier for the new object.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodsave">ezcPersistentSessionFoundation::save()</a></code></td>
              <td>
                                  Saves the new persistent object $object to the database using an INSERT INTO query.
                              </td>
            </tr></tbody></table><a name="methodsaveOrUpdate" id="saveOrUpdate"><!-- --></a>

    <h4>saveOrUpdate</h4>

    <div class="method-signature">
      void
      saveOrUpdate(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                        )
    </div>

    <p>Saves or updates the persistent $object to the database.</p><div><p>If the object is a new object an INSERT INTO query will be executed. If  the object is persistent already it will be updated with an UPDATE  query.</p><p>Newly saved objects are automatically recorded in the identity map.  Updates to existing objects are reflected automatically, too.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentDefinitionNotFoundException.html">ezcPersistentDefinitionNotFoundException</a></code></td>
              <td>
                                  if the definition of the persistent object could not be loaded.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if the insert or update query failed.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if $object is not of a valid persistent object type.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectException.html">ezcPersistentObjectException</a></code></td>
              <td>
                                  if any of the definition requirements are not met.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodsaveOrUpdate">ezcPersistentSessionFoundation::saveOrUpdate()</a></code></td>
              <td>
                                  Saves or updates the persistent object $object to the database.
                              </td>
            </tr></tbody></table><a name="methodupdate" id="update"><!-- --></a>

    <h4>update</h4>

    <div class="method-signature">
      void
      update(
                                  <a href="ezcPersistentObject.html">ezcPersistentObject</a>
          $object
                        )
    </div>

    <p>Updates $object in the database using an UPDATE query.</p><div><p>Stores the changes made to $object into the database. Updates are  automatically reflected in the identity map.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$object</code></td>
              <td><em><a href="ezcPersistentObject.html">ezcPersistentObject</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentDefinitionNotFoundException.html">ezcPersistentDefinitionNotFoundException</a></code></td>
              <td>
                                  if $object is not of a valid persistent object type.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentObjectNotPersistentException.html">ezcPersistentObjectNotPersistentException</a></code></td>
              <td>
                                  if $object is not stored in the database already.
                              </td>
            </tr><tr><td><code><a href="ezcPersistentQueryException.html">ezcPersistentQueryException</a></code></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodupdate">ezcPersistentSessionFoundation::update()</a></code></td>
              <td>
                                  Saves the new persistent object $object to the database using an UPDATE query.
                              </td>
            </tr></tbody></table><a name="methodupdateFromQuery" id="updateFromQuery"><!-- --></a>

    <h4>updateFromQuery</h4>

    <div class="method-signature">
      void
      updateFromQuery(
                                  
          $query
                        )
    </div>

    <p>Updates persistent objects using the query $query.</p><div><p>The $query should be created using createUpdateQuery().</p><p>Currently this method only executes the provided query. Future  releases PersistentSession may introduce caching of persistent objects.  When caching is introduced it will be required to use this method to run  cusom delete queries. To avoid being incompatible with future releases it is  advisable to always use this method when running custom delete queries on  persistent objects.</p><p>Attention: Every call to this method will cause the internal <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a> to be completly reset. This is neccessary to  avoid inconsistencies, because the session cannot trace which objects  are updated by the query.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$query</code></td>
              <td><em><a href="/documentation/trunk/Database/phpdoc/ezcQueryUpdate.html">ezcQueryUpdate</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentQueryException.html">ezcPersistentQueryException</a></code></td>
              <td>
                                  if the update query failed.
                              </td>
            </tr></tbody></table><h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentSessionFoundation.html#methodupdateFromQuery">ezcPersistentSessionFoundation::updateFromQuery()</a></code></td>
              <td>
                                  Updates persistent objects using the query $query.
                              </td>
            </tr></tbody></table><div class="credit">
      Documentation generated by <a href="http://www.phpdoc.org">phpDocumentor 1.4.3</a>
    </div>
  </div>
  
	</div>

	<div class="footer">
	Copyright © 2010 <a href="http://apache.org">The Software Foundation</a>
</div>
</div>
</body>
</html>
