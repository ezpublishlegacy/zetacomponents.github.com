<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en"
	lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="description" content="Zeta Components - reusable set of high quality PHP components to fasten your development." />
	<meta name="keywords" content="PHP, apache, components, framework, quality" />
	<meta name="author" content="dotxp" />
	<meta name="language" content="en" />
	<meta name="date" content="Wed, 04 Aug 2010 13:07:52 +0200" />
	<meta name="robots" content="all" />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.title" content="ezcPersistentIdentityFindIterator.html" />
	<meta name="DC.creator" content="dotxp" />
	<meta name="DC.date" content="Wed, 04 Aug 2010 13:07:52 +0200" />
	<meta name="DC.rights" content="Copyright" />

	<link rel="meta" href="/documentation/trunk/PersistentObject/phpdoc/ezcPersistentIdentityFindIterator.rdf" />
	<link rel="icon" href="/images/favicon.png" type="image/png" />

	<link rel="Stylesheet" type="text/css" href="/styles/screen.css" media="screen" />
	<link rel="Stylesheet" type="text/css" href="/styles/print.css" media="print" />


	<title>Zeta Components - high quality PHP components</title>
</head>
<body>
<div id="wcv">
	<h1>
		<a id="header-png" href="" title="Zeta Components - high quality PHP components">
			Zeta Components - high quality PHP components
		</a>
	</h1>

	<ul class="navigation">
<li >
	<a href="/news.html" title="About">About</a>
	</li>
<li >
	<a href="/community/index.html" title="Community">Community</a>
	</li>
<li class="requested">
	<a href="/documentation/overview.html" title="Documentation">Documentation</a>
	</li>
<li >
	<a href="/download/index.html" title="Download">Download</a>
	</li>
<li >
	<a href="/support.html" title="Support">Support</a>
	</li>

</ul>
<ul class="subnavigation">
<li >
	<a href="/documentation/overview.html" title="Overview">Overview</a>
	</li>
<li >
	<a href="/documentation/install.html" title="Installation">Installation</a>
	</li>

</ul>

	<div class="content">
    <ul class="tabs">
    <li >
	<a href="/documentation/trunk/PersistentObject/tutorial.html" title="Tutorial">Tutorial</a>
	</li>
<li class="requested">
	<a href="/documentation/trunk/PersistentObject/phpdoc/classtrees.html" title="API">API</a>
	</li>

</ul>

		
  <div class="phpdoc">
    <h2>Zeta Components Manual :: Docs For Class ezcPersistentIdentityFindIterator</h2>

                  <h3>PersistentObject::ezcPersistentIdentityFindIterator</h3>
    
<a name="sec-description"></a>
<h3>Class ezcPersistentIdentityFindIterator</h3>

<p>Iterator class with identity mapping facilities.</p><div><p><a href="ezcPersistentFindIterator.html">ezcPersistentFindIterator</a> only instantiates one object which is  reused for each iteration. This saves memory and is faster than fetching and  instantiating the result set in one go. This class in addition performs  identity mapping and does not re-created objects that already exist in the  application scope.</p><p>You must loop over the complete resultset of the iterator or  flush it before executing new queries.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><span class="src-id">createFindQuery</span><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">where</span><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">expr</span><span class="src-sym">-&gt;</span><span class="src-id">gt</span><span class="src-sym">(&#8192;</span><span class="src-str">'age'</span><span class="src-sym">,&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">bindValue</span><span class="src-sym">(&#8192;</span><span class="src-num">15&#8192;</span><span class="src-sym">)&#8192;)&#8192;)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;<span class="src-sym">-&gt;</span><span class="src-id">orderBy</span><span class="src-sym">(&#8192;</span><span class="src-str">'name'&#8192;</span><span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;<span class="src-sym">-&gt;</span><span class="src-id">limit</span><span class="src-sym">(&#8192;</span><span class="src-num">10&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-var">$objects&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><span class="src-id">findIterator</span><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">,&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-key">foreach&#8192;</span><span class="src-sym">(&#8192;</span><span class="src-var">$objects&#8192;</span><span class="src-key">as&#8192;</span><span class="src-var">$object&#8192;</span><span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-key">if&#8192;</span><span class="src-sym">(&#8192;</span>...&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$objects</span><span class="src-sym">-&gt;</span><a href="ezcPersistentFindIterator.html#methodflush">flush</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-key">break</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">}</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-sym">}</span></div></li>
</ol></div>
<p>Source for this file: <a href="http://fisheye6.atlassian.com/browse/zetacomponents/trunk/PersistentObject/src/session_decorators/identity/find_iterator.php?r=HEAD">/PersistentObject/src/session_decorators/identity/find_iterator.php</a></p>
       


<pre><a href="ezcPersistentFindIterator.html">ezcPersistentFindIterator</a>
   |
   --ezcPersistentIdentityFindIterator</pre>


  <table><tr><td>
            <strong>Version:</strong>&#8192;&#8192;
          </td>
          <td>//autogen//</td>
        </tr></table><a name="sec-var-summary"></a>
  <h3>Member Variables</h3>
  <table class="summary"><tr><td class="right">
            <em>protected</em>            <em><a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a></em>          </td>
          <td>
            <code>
              $idMap
                          </code>
            <br><div style="margin-left: 20px">Identity map.</div>                      </td>
        </tr><tr><td class="right">
            <em>protected</em>            <em><a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a></em>          </td>
          <td>
            <code>
              $options
                          </code>
            <br><div style="margin-left: 20px">Identity session options</div>                      </td>
        </tr></table><h3>Inherited Member Variables</h3>
  <table class="summary"><thead><tr><th colspan="2">
            From <span class="classname"><a href="ezcPersistentFindIterator.html">ezcPersistentFindIterator</a></span>         
          </th>
        </tr></thead><tbody><tr><td class="right">
              <em>protected</em>                          </td>
            <td>
              <code><a href="ezcPersistentFindIterator.html#var%24def">ezcPersistentFindIterator::$def</a></code>
              
            </td>
          </tr><tr><td class="right">
              <em>protected</em>                          </td>
            <td>
              <code><a href="ezcPersistentFindIterator.html#var%24object">ezcPersistentFindIterator::$object</a></code>
              
            </td>
          </tr></tbody></table><a name="sec-method-summary"></a>
  <h3>Method Summary</h3>
  <table class="summary"><tr><td class="right">
            <em>public</em>                        <em>ezcPersistentIdentityFindIterator</em>          </td>
          <td>
            <code>
              <a href="#__construct"><b>__construct</b></a>(
                                                                                    $stmt
                                                    ,                                     $def
                                                    ,                                     $idMap
                                                    ,                                     $options
                                                 )
            </code>
            <br><div style="margin-left: 20px">Initializes the iterator with the statement $stmt and the definition $def..</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>object</em>          </td>
          <td>
            <code>
              <a href="#next"><b>next</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Returns the next persistent object in the result set.</div>          </td>
        </tr></table><h3>Inherited Methods</h3>
  <table class="summary"><thead><tr><th colspan="2">
            From <span class="classname"><a href="ezcPersistentFindIterator.html">ezcPersistentFindIterator</a></span>
          </th>
        </tr></thead><tbody><tr><td class="right">
              <em>public</em>                                          <em>ezcPersistentFindIterator</em>            </td>
            <td>
              <code><b><a href="ezcPersistentFindIterator.html#method__construct">ezcPersistentFindIterator::__construct()</a></b></code>
              <br><div style="margin-left: 20px">Initializes the iterator with the statement $stmt and the definition $def..</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>object</em>            </td>
            <td>
              <code><b><a href="ezcPersistentFindIterator.html#methodcurrent">ezcPersistentFindIterator::current()</a></b></code>
              <br><div style="margin-left: 20px">Returns the current object of this iterator.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>void</em>            </td>
            <td>
              <code><b><a href="ezcPersistentFindIterator.html#methodflush">ezcPersistentFindIterator::flush()</a></b></code>
              <br><div style="margin-left: 20px">Clears the results from the iterator.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>null</em>            </td>
            <td>
              <code><b><a href="ezcPersistentFindIterator.html#methodkey">ezcPersistentFindIterator::key()</a></b></code>
              <br><div style="margin-left: 20px">Returns null.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>object</em>            </td>
            <td>
              <code><b><a href="ezcPersistentFindIterator.html#methodnext">ezcPersistentFindIterator::next()</a></b></code>
              <br><div style="margin-left: 20px">Returns the next persistent object in the result set.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>void</em>            </td>
            <td>
              <code><b><a href="ezcPersistentFindIterator.html#methodrewind">ezcPersistentFindIterator::rewind()</a></b></code>
              <br><div style="margin-left: 20px">Sets the iterator to point to the first object in the result set.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>bool</em>            </td>
            <td>
              <code><b><a href="ezcPersistentFindIterator.html#methodvalid">ezcPersistentFindIterator::valid()</a></b></code>
              <br><div style="margin-left: 20px">Returns true if there is a current object.</div>                          </td>
          </tr></tbody></table><a name="sec-methods"></a>
  <h3>Methods</h3>
  <a name="method_detail"></a>
    
      <a name="method__construct" id="__construct"><!-- --></a>

    <h4>__construct</h4>

    <div class="method-signature">
      ezcPersistentIdentityFindIterator
      __construct(
                                  
          $stmt
                            ,           <a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a>
          $def
                            ,           <a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a>
          $idMap
                            ,           <a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a>
          $options
                        )
    </div>

    <p>Initializes the iterator with the statement $stmt and the definition $def..</p><div><p>The statement $stmt must be executed but not used to retrieve any results yet.  The iterator will return objects with they persistent object type provided by  $def.</p><p>The $idMap will be used to retrieve existing identities and to store new  ones, if discovered. The $options object contains the options used by  the identity decorator which uses this instance.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$stmt</code></td>
              <td><em>PDOStatement</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$def</code></td>
              <td><em><a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$idMap</code></td>
              <td><em><a href="ezcPersistentIdentityMap.html">ezcPersistentIdentityMap</a></em></td>
              <td>
                              </td>
            </tr><tr><td><code>$options</code></td>
              <td><em><a href="ezcPersistentSessionIdentityDecoratorOptions.html">ezcPersistentSessionIdentityDecoratorOptions</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Redefinition of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentFindIterator.html#method__construct">ezcPersistentFindIterator::__construct()</a></code></td>
            <td>
                              Initializes the iterator with the statement $stmt and the definition $def..
                          </td>
          </tr></tbody></table><a name="methodnext" id="next"><!-- --></a>

    <h4>next</h4>

    <div class="method-signature">
      object
      next(
      )
    </div>

    <p>Returns the next persistent object in the result set.</p><div><p>The next object is set to the current object of the iterator.  Returns null and sets the current object to null if there  are no more results in the result set.</p></div>
    
        

          <h5>Redefinition of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentFindIterator.html#methodnext">ezcPersistentFindIterator::next()</a></code></td>
            <td>
                              Returns the next persistent object in the result set.
                          </td>
          </tr></tbody></table><div class="credit">
      Documentation generated by <a href="http://www.phpdoc.org">phpDocumentor 1.4.3</a>
    </div>
  </div>
  
	</div>

	<div class="footer">
	Copyright © 2010 <a href="http://apache.org">The Software Foundation</a>
</div>
</div>
</body>
</html>
